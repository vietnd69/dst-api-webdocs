"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[54269],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const l={},r=i.createContext(l);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},78245:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"game-scripts/core-systems/development-tools/console/reload","title":"Reload System","description":"Hot-swapping and live reloading system for development and debugging","source":"@site/docs/game-scripts/core-systems/development-tools/console/reload.md","sourceDirName":"game-scripts/core-systems/development-tools/console","slug":"/game-scripts/core-systems/development-tools/console/reload","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/development-tools/console/reload","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"reload","title":"Reload System","description":"Hot-swapping and live reloading system for development and debugging","sidebar_position":2,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Console Commands","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/development-tools/console/consolecommands"},"next":{"title":"Debugging Tools Overview","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/development-tools/debugging/"}}');var l=s(74848),r=s(28453);const o={id:"reload",title:"Reload System",description:"Hot-swapping and live reloading system for development and debugging",sidebar_position:2,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},a="Reload System",t={},d=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Hot-Swapping",id:"hot-swapping",level:3},{value:"Class Inheritance Management",id:"class-inheritance-management",level:3},{value:"File Modification Tracking",id:"file-modification-tracking",level:3},{value:"Global Variables",id:"global-variables",level:2},{value:"InvalidatedTables",id:"invalidatedtables",level:3},{value:"RequiredFilesForReload",id:"requiredfilesforreload",level:3},{value:"LastProbeReload",id:"lastprobereload",level:3},{value:"Functions",id:"functions",level:2},{value:"cloneTable(t)",id:"clone-table",level:3},{value:"hotswap(modname)",id:"hotswap",level:3},{value:"ScrubClass(cls, inh)",id:"scrub-class",level:3},{value:"MonkeyPatchClass(mt)",id:"monkey-patch-class",level:3},{value:"MonkeyPatchClasses()",id:"monkey-patch-classes",level:3},{value:"DoReload()",id:"do-reload",level:3},{value:"ProbeReload(ispressed)",id:"probe-reload",level:3},{value:"Usage Patterns",id:"usage-patterns",level:2},{value:"Development Workflow",id:"development-workflow",level:3},{value:"File Modification Tracking",id:"file-modification-tracking-1",level:3},{value:"Class Hot-Swapping",id:"class-hot-swapping",level:3},{value:"Development Integration",id:"development-integration",level:2},{value:"Console Integration",id:"console-integration",level:3},{value:"Input System Integration",id:"input-system-integration",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Memory Management",id:"memory-management",level:3},{value:"Hot-Swap Efficiency",id:"hot-swap-efficiency",level:3},{value:"Development vs Production",id:"development-vs-production",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Reload Failure Recovery",id:"reload-failure-recovery",level:3},{value:"Common Error Scenarios",id:"common-error-scenarios",level:3},{value:"Limitations and Considerations",id:"limitations-and-considerations",level:2},{value:"Scope Limitations",id:"scope-limitations",level:3},{value:"Class System Constraints",id:"class-system-constraints",level:3},{value:"Production Usage",id:"production-usage",level:3},{value:"Related Systems",id:"related-systems",level:2},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Custom Reload Triggers",id:"custom-reload-triggers",level:3},{value:"Module-Specific Reloading",id:"module-specific-reloading",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"reload-system",children:"Reload System"})}),"\n",(0,l.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Build Version"}),(0,l.jsx)(n.th,{children:"Change Date"}),(0,l.jsx)(n.th,{children:"Change Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"676042"}),(0,l.jsx)(n.td,{children:"2025-06-21"}),(0,l.jsx)(n.td,{children:"stable"}),(0,l.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"reload"})," system provides hot-swapping capabilities for Don't Starve Together development, allowing developers to reload modified Lua modules without restarting the game. This system enables rapid iteration during development by dynamically updating code while preserving game state."]}),"\n",(0,l.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,l.jsx)(n.h3,{id:"hot-swapping",children:"Hot-Swapping"}),"\n",(0,l.jsx)(n.p,{children:"The system performs live code replacement by comparing old and new module versions, updating functions and tables in-place while maintaining object references and inheritance chains."}),"\n",(0,l.jsx)(n.h3,{id:"class-inheritance-management",children:"Class Inheritance Management"}),"\n",(0,l.jsx)(n.p,{children:"Special handling for DST's class system ensures that inheritance relationships are preserved and properly updated when base classes are modified."}),"\n",(0,l.jsx)(n.h3,{id:"file-modification-tracking",children:"File Modification Tracking"}),"\n",(0,l.jsx)(n.p,{children:"The system monitors file modification times to automatically detect changes and trigger appropriate reload procedures."}),"\n",(0,l.jsx)(n.h2,{id:"global-variables",children:"Global Variables"}),"\n",(0,l.jsx)(n.h3,{id:"invalidatedtables",children:"InvalidatedTables"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Type:"})," ",(0,l.jsx)(n.code,{children:"table"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Tracks tables that have been invalidated during the reload process and need to be removed from the ClassRegistry."]}),"\n",(0,l.jsx)(n.h3,{id:"requiredfilesforreload",children:"RequiredFilesForReload"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Type:"})," ",(0,l.jsx)(n.code,{children:"table"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Maps file paths to their last known modification times for change detection."]}),"\n",(0,l.jsx)(n.h3,{id:"lastprobereload",children:"LastProbeReload"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Type:"})," ",(0,l.jsx)(n.code,{children:"boolean"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Tracks the previous state of the reload probe to detect state changes."]}),"\n",(0,l.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,l.jsx)(n.h3,{id:"clone-table",children:"cloneTable(t)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nCreates a shallow copy of a table, copying all key-value pairs to a new table."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"t"})," (table): The table to clone"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"(table): A new table containing all key-value pairs from the original"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local original = {a = 1, b = 2, c = {nested = true}}\nlocal copy = cloneTable(original)\n-- copy.a == 1, copy.b == 2, copy.c == original.c (same reference)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"hotswap",children:"hotswap(modname)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nPerforms hot-swapping of a Lua module by reloading it and updating all existing references. Preserves object identity while updating function implementations and table contents."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"modname"})," (string): The name of the module to hot-swap"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"(table|nil): The original module table on success, or nil on error"}),"\n",(0,l.jsx)(n.li,{children:"(string|nil): Error message if reload failed"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Hot-swap the components/health module\nlocal oldmod, err = hotswap("components/health")\nif err then\n    print("Hot-swap failed:", err)\nelse\n    print("Successfully hot-swapped health component")\nend\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Implementation Details:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"State Backup"}),": Creates a backup of the global environment"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Module Reload"}),": Unloads and reloads the specified module"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reference Update"}),": Updates all existing references to maintain object identity"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Error Recovery"}),": Restores original state if reload fails"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inheritance Handling"}),": Manages class inheritance chains properly"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"scrub-class",children:"ScrubClass(cls, inh)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nRemoves inherited members from a class table, leaving only members that belong specifically to that class. Used during hot-swapping to clean up inheritance relationships."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"cls"})," (table): The class table to scrub"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"inh"})," (table): The inheritance source table"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Remove inherited functions from derived class\nScrubClass(DerivedClass, BaseClass)\n-- DerivedClass now only contains its own members\n"})}),"\n",(0,l.jsx)(n.h3,{id:"monkey-patch-class",children:"MonkeyPatchClass(mt)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nRebuilds a class metatable by walking up the inheritance chain and applying all functions from base classes to derived classes in the correct order."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mt"})," (table): The metatable/class to patch"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Rebuild inheritance chain for a class\nMonkeyPatchClass(SomeClassMetatable)\n-- Class now has all inherited functions properly applied\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Implementation Process:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Chain Walking"}),": Traverses inheritance chain from derived to base"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Function Collection"}),": Gathers all functions from the entire chain"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Order Application"}),": Applies functions from base to derived order"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Metatable Rebuild"}),": Reconstructs the metatable with proper inheritance"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"monkey-patch-classes",children:"MonkeyPatchClasses()"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nApplies inheritance patching to all classes in the ClassRegistry. Called after hot-swapping to ensure all class relationships are properly maintained."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- After hot-swapping multiple modules\nMonkeyPatchClasses()\n-- All classes now have properly updated inheritance\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Process Overview:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Class Scrubbing"}),": Removes inherited functions from all classes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inheritance Reconstruction"}),": Rebuilds inheritance chains bottom-up"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Registry Update"}),": Updates ClassRegistry with patched classes"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"do-reload",children:"DoReload()"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nMain reload function that checks for modified files and performs hot-swapping for all changed modules. Handles the complete reload workflow including file detection and class patching."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Trigger a complete reload check\nDoReload()\n-- All modified files will be hot-swapped\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Workflow Steps:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cache Purge"}),": Clears Lua file cache on console builds"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File Detection"}),": Checks modification times for all tracked files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Path Validation"}),": Ensures files are in scripts/ directory"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Module Processing"}),": Hot-swaps each modified module"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Class Patching"}),": Updates all class inheritance relationships"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cleanup"}),": Performs garbage collection and invalidation cleanup"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"probe-reload",children:"ProbeReload(ispressed)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nProbe function typically called from input handling to trigger reload when a specific key or condition is met. Detects state changes to avoid repeated triggers."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ispressed"})," (boolean): Whether the reload trigger is currently active"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- In input handling code\nProbeReload(TheInput:IsKeyDown(KEY_F5))\n-- Reload triggers only on key press, not while held\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usage-patterns",children:"Usage Patterns"}),"\n",(0,l.jsx)(n.h3,{id:"development-workflow",children:"Development Workflow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Typical development reload pattern\nfunction OnUpdateInput()\n    -- Check for reload hotkey\n    ProbeReload(TheInput:IsKeyDown(KEY_F5))\nend\n\n-- Manual reload for specific module\nif DEVELOPMENT_MODE then\n    local success, err = hotswap("components/mycomponent")\n    if not success then\n        print("Reload failed:", err)\n    end\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"file-modification-tracking-1",children:"File Modification Tracking"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Set up file tracking for auto-reload\nRequiredFilesForReload["scripts/components/health.lua"] = \n    TheSim:GetFileModificationTime("scripts/components/health.lua")\n\n-- Check if file has been modified\nlocal currentTime = TheSim:GetFileModificationTime("scripts/components/health.lua")\nif currentTime ~= RequiredFilesForReload["scripts/components/health.lua"] then\n    -- File has been modified, reload needed\n    DoReload()\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"class-hot-swapping",children:"Class Hot-Swapping"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Safe class hot-swapping with error handling\nlocal function ReloadComponent(component_name)\n    local old_global = cloneTable(_G)\n    local module_path = "components/" .. component_name\n    \n    local success, err = hotswap(module_path)\n    if not success then\n        -- Restore global state on failure\n        for k, v in pairs(old_global) do\n            _G[k] = v\n        end\n        return false, err\n    end\n    \n    return true\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"development-integration",children:"Development Integration"}),"\n",(0,l.jsx)(n.h3,{id:"console-integration",children:"Console Integration"}),"\n",(0,l.jsx)(n.p,{children:"The reload system integrates with console builds through:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File Cache Purging"}),": ",(0,l.jsx)(n.code,{children:"TheSim:PurgeLuaFileCache()"})," clears cached files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Modification Time Queries"}),": ",(0,l.jsx)(n.code,{children:"TheSim:GetFileModificationTime()"})," for change detection"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Path Validation"}),": Ensures only scripts/ directory files are reloaded"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"input-system-integration",children:"Input System Integration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Typical integration with input system\nlocal RELOAD_KEY = KEY_F5\n\nfunction HandleReloadInput()\n    if TheInput:IsKeyDown(RELOAD_KEY) and DEVELOPMENT_MODE then\n        ProbeReload(true)\n    else\n        ProbeReload(false)\n    end\nend\n"})}),"\n",(0,l.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"memory-management",children:"Memory Management"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Garbage Collection"}),": Explicit ",(0,l.jsx)(n.code,{children:"collectgarbage()"})," calls after hot-swapping"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reference Cleanup"}),": Proper cleanup of InvalidatedTables to prevent memory leaks"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"State Backup"}),": Temporary cloning of global state impacts memory during reload"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"hot-swap-efficiency",children:"Hot-Swap Efficiency"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Selective Updates"}),": Only modified files are processed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"In-Place Updates"}),": Functions are updated without recreating objects"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inheritance Optimization"}),": Class patching minimizes redundant operations"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"development-vs-production",children:"Development vs Production"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Guard reload functionality in production\nif DEVELOPMENT_MODE or IsConsole() then\n    -- Enable hot-swapping capabilities\n    ProbeReload(TheInput:IsKeyDown(RELOAD_KEY))\nelse\n    -- Disable reload system in production builds\n    -- (system functions still exist but are not called)\nend\n"})}),"\n",(0,l.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.h3,{id:"reload-failure-recovery",children:"Reload Failure Recovery"}),"\n",(0,l.jsx)(n.p,{children:"The system provides robust error recovery:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Global State Restoration"}),": Automatic rollback on reload failure"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Error Reporting"}),": Clear error messages for debugging"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Graceful Degradation"}),": Failed reloads don't crash the game"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"common-error-scenarios",children:"Common Error Scenarios"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Syntax errors in reloaded module\nlocal success, err = hotswap("components/broken_component")\nif not success then\n    print("Syntax error in component:", err)\nend\n\n-- Missing file or invalid module path\nlocal success, err = hotswap("nonexistent/module")\nif not success then\n    print("Module not found:", err)\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"limitations-and-considerations",children:"Limitations and Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"scope-limitations",children:"Scope Limitations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Scripts Directory Only"}),": Only files in scripts/ or /scripts/ paths can be reloaded"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lua Files Only"}),": System specifically targets .lua files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Module System Dependency"}),": Relies on Lua's require/package system"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"class-system-constraints",children:"Class System Constraints"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inheritance Complexity"}),": Complex inheritance chains may not hot-swap perfectly"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Metatable Dependencies"}),": Changes to metatable structure may require restart"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Instance State"}),": Existing object instances retain old state until explicitly updated"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"production-usage",children:"Production Usage"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Development Only"}),": Hot-swapping should be disabled in production builds"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Performance Impact"}),": File monitoring and reload checks add overhead"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Stability Concerns"}),": Hot-swapping can introduce unexpected behavior"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"related-systems",children:"Related Systems"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./class.md",children:"Class System"}),": Provides the ClassRegistry and inheritance mechanisms"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./mods.md",children:"Module System"}),": Integration with DST's module loading system"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./debug/debugtools.md",children:"Debug Tools"}),": Development utilities that complement hot-swapping"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/development-tools/console/consolecommands",children:"Console Commands"}),": Console integration for development builds"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,l.jsx)(n.h3,{id:"custom-reload-triggers",children:"Custom Reload Triggers"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Set up custom reload conditions\nfunction CheckCustomReloadConditions()\n    -- Reload on specific debug command\n    if DEBUG_RELOAD_REQUESTED then\n        DoReload()\n        DEBUG_RELOAD_REQUESTED = false\n    end\n    \n    -- Reload on file system events (if available)\n    if FileSystemWatcher and FileSystemWatcher:HasChanges() then\n        DoReload()\n    end\nend\n"})}),"\n",(0,l.jsx)(n.h3,{id:"module-specific-reloading",children:"Module-Specific Reloading"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Reload specific subsystems\nfunction ReloadUISystem()\n    local ui_modules = {\n        "screens/mainscreen",\n        "widgets/button",\n        "widgets/menu"\n    }\n    \n    for _, module in ipairs(ui_modules) do\n        local success, err = hotswap(module)\n        if not success then\n            print("Failed to reload", module, ":", err)\n        end\n    end\n    \n    MonkeyPatchClasses()\nend\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);