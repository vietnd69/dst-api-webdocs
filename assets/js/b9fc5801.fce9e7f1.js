"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[655],{2019:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api vanilla/core/modoverrides","title":"modoverrides.lua Configuration","description":"The modoverrides.lua file is a critical configuration file for Don\'t Starve Together servers that controls which mods are enabled and how they are configured.","source":"@site/docs/api vanilla/core/modoverrides.md","sourceDirName":"api vanilla/core","slug":"/api vanilla/core/modoverrides","permalink":"/api vanilla/core/modoverrides","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"modoverrides","title":"modoverrides.lua Configuration","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Mod Structure and Server Integration","permalink":"/api vanilla/core/mod-structure"},"next":{"title":"Prefabs","permalink":"/category/prefabs"}}');var r=o(4848),s=o(8453);const a={id:"modoverrides",title:"modoverrides.lua Configuration",sidebar_position:6},t="modoverrides.lua Configuration",d={},l=[{value:"File Location",id:"file-location",level:2},{value:"Basic Structure",id:"basic-structure",level:2},{value:"Complete Configuration Structure",id:"complete-configuration-structure",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Master vs. Caves Configuration",id:"master-vs-caves-configuration",level:2},{value:"Server-Side Validation",id:"server-side-validation",level:2},{value:"Dynamic Configuration",id:"dynamic-configuration",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"modoverrideslua-configuration",children:"modoverrides.lua Configuration"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"modoverrides.lua"})," file is a critical configuration file for Don't Starve Together servers that controls which mods are enabled and how they are configured."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'flowchart TD\n    subgraph "Mod Configuration Flow"\n    A[Server Startup] --\x3e B[Read dedicated_server_mods_setup.lua]\n    B --\x3e C[Download Required Workshop Mods]\n    C --\x3e D[Read Master/modoverrides.lua]\n    C --\x3e E[Read Caves/modoverrides.lua]\n    D --\x3e F[Enable & Configure Mods for Master]\n    E --\x3e G[Enable & Configure Mods for Caves]\n    F --\x3e H[Initialize Master Shard]\n    G --\x3e I[Initialize Caves Shard]\n    end\n    \n    subgraph "modoverrides.lua Structure"\n    M1["return {"] --\x3e M2["[workshop-123456789] = {"]\n    M2 --\x3e M3["enabled = true/false"]\n    M2 --\x3e M4["configuration_options = {"]\n    M4 --\x3e M5["option1 = value1"]\n    M4 --\x3e M6["option2 = value2"]\n    M6 --\x3e M7["}"]\n    M7 --\x3e M8["}"]\n    M8 --\x3e M9["[workshop-987654321] = {"]\n    M9 --\x3e M10["..."]\n    M10 --\x3e M11["}"]\n    end\n    \n    subgraph "Validation Process"\n    V1[Client Connection] --\x3e V2[Check all_clients_require_mod]\n    V2 --\x3e |"= true"| V3[Client must have mod]\n    V2 --\x3e |"= false"| V4[Client can connect without mod]\n    V3 --\x3e V5[Verify mod version compatibility]\n    V4 --\x3e V5\n    V5 --\x3e V6[Client connects to server]\n    end\n'})}),"\n",(0,r.jsx)(n.h2,{id:"file-location",children:"File Location"}),"\n",(0,r.jsxs)(n.p,{children:["Each shard in a DST server cluster has its own ",(0,r.jsx)(n.code,{children:"modoverrides.lua"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"MyDediServer/\n\u251c\u2500\u2500 Cluster_1/\n\u2502   \u251c\u2500\u2500 Master/\n\u2502   \u2502   \u2514\u2500\u2500 modoverrides.lua  # Overworld shard mod configuration\n\u2502   \u2514\u2500\u2500 Caves/\n\u2502       \u2514\u2500\u2500 modoverrides.lua  # Caves shard mod configuration\n\u2514\u2500\u2500 Cluster_2/\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,r.jsx)(n.h2,{id:"basic-structure",children:"Basic Structure"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"modoverrides.lua"})," file returns a Lua table with mod configurations:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'return {\n  -- Workshop mods use "workshop-" prefix + Workshop ID\n  ["workshop-123456789"] = { \n    enabled = true \n  },\n  \n  -- Local mods use the folder name directly\n  ["mod_folder_name"] = { \n    enabled = true \n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"complete-configuration-structure",children:"Complete Configuration Structure"}),"\n",(0,r.jsxs)(n.p,{children:["A fully-featured ",(0,r.jsx)(n.code,{children:"modoverrides.lua"})," file contains:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'return {\n  ["workshop-123456789"] = {\n    -- Whether the mod is enabled\n    enabled = true,\n    \n    -- Mod configuration options (from modinfo.lua)\n    configuration_options = {\n      option1 = "value1",\n      option2 = 50,\n      option3 = false\n    }\n  },\n  \n  ["workshop-987654321"] = {\n    enabled = false  -- Mod is installed but disabled\n  },\n  \n  ["local_mod_folder"] = {\n    enabled = true,\n    configuration_options = {\n      difficulty = "hard",\n      spawn_rate = 0.5\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"configuration_options"})," table matches the options defined in the mod's ",(0,r.jsx)(n.code,{children:"modinfo.lua"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- In a mod\'s modinfo.lua\nconfiguration_options = {\n  {\n    name = "difficulty",  -- This is the key used in modoverrides.lua\n    label = "Difficulty", -- Display name shown to users\n    options = {\n      {description = "Easy", data = "easy"},\n      {description = "Normal", data = "normal"},\n      {description = "Hard", data = "hard"}\n    },\n    default = "normal"\n  },\n  {\n    name = "spawn_rate",\n    label = "Spawn Rate",\n    options = {\n      {description = "Low", data = 0.25},\n      {description = "Medium", data = 0.5},\n      {description = "High", data = 1.0}\n    },\n    default = 0.5\n  }\n}\n\n-- In modoverrides.lua\n["workshop-123456789"] = {\n  enabled = true,\n  configuration_options = {\n    difficulty = "hard",  -- Using the \'name\' field as key\n    spawn_rate = 0.25     -- Value must match a \'data\' field\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"master-vs-caves-configuration",children:"Master vs. Caves Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Each shard can have different mod configurations:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- Master/modoverrides.lua (Overworld)\nreturn {\n  ["workshop-123456789"] = {\n    enabled = true,\n    configuration_options = { difficulty = "hard" }\n  }\n}\n\n-- Caves/modoverrides.lua (Underground)\nreturn {\n  ["workshop-123456789"] = {\n    enabled = true,\n    configuration_options = { difficulty = "normal" }  -- Different setting\n  },\n  ["workshop-567891234"] = {\n    enabled = true  -- Mod only enabled in caves\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"server-side-validation",children:"Server-Side Validation"}),"\n",(0,r.jsx)(n.p,{children:"The server applies these rules when loading mods:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"all_clients_require_mod = true"})," in a mod's ",(0,r.jsx)(n.code,{children:"modinfo.lua"}),", clients must have the mod installed to connect"]}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"client_only_mod = true"}),", the mod isn't loaded on the server but clients can still use it"]}),"\n",(0,r.jsx)(n.li,{children:"Mods with dependencies may require other mods to be enabled"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dynamic-configuration",children:"Dynamic Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["For advanced setups, the ",(0,r.jsx)(n.code,{children:"modoverrides.lua"})," file can include logic:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- Dynamic mod configuration based on cluster name\nlocal cluster_name = "_myClusterName_" -- Replace with actual code to get cluster name\n\nlocal config = {\n  ["workshop-123456789"] = { enabled = true }\n}\n\n-- Add PvP mods for specific clusters\nif cluster_name:find("PvP") then\n  config["workshop-PVP_MOD_ID"] = { enabled = true }\nend\n\n-- Adjust difficulty based on cluster name\nif cluster_name:find("Hard") then\n  config["workshop-123456789"].configuration_options = { difficulty = "hard" }\nelseif cluster_name:find("Easy") then\n  config["workshop-123456789"].configuration_options = { difficulty = "easy" }\nelse\n  config["workshop-123456789"].configuration_options = { difficulty = "normal" }\nend\n\nreturn config\n'})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.p,{children:["Common issues with ",(0,r.jsx)(n.code,{children:"modoverrides.lua"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Syntax Errors"}),": Ensure proper Lua syntax with all brackets and commas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Invalid Options"}),": Make sure option values match those defined in ",(0,r.jsx)(n.code,{children:"modinfo.lua"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mod Compatibility"}),": Some mods may conflict when enabled together"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Different Shard Configurations"}),": Ensure compatible settings between Master and Caves"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent Configurations"}),": Unless necessary, keep mod settings consistent across shards"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Version Your Configurations"}),": Back up working configurations before making changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test Before Deployment"}),": Verify mod combinations work before using on a production server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document Special Settings"}),": Keep notes about non-default mod settings and their purpose"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Regular Updates"}),": Review and update mod configurations after game or mod updates"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>t});var i=o(6540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);