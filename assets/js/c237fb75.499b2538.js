"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[1050],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(96540);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},38366:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"game-scripts/core-systems/localization-content/content/play-the-doll","title":"Play The Doll","description":"The Enchanted Doll theatrical performance implementation for the stage play system","source":"@site/docs/game-scripts/core-systems/localization-content/content/play_the_doll.md","sourceDirName":"game-scripts/core-systems/localization-content/content","slug":"/game-scripts/core-systems/localization-content/content/play-the-doll","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-the-doll","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"id":"play-the-doll","title":"Play The Doll","description":"The Enchanted Doll theatrical performance implementation for the stage play system","sidebar_position":8,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Play General Scripts","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-generalscripts"},"next":{"title":"Play The Veil","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-the-veil"}}');var l=s(74848),r=s(28453);const t={id:"play-the-doll",title:"Play The Doll",description:"The Enchanted Doll theatrical performance implementation for the stage play system",sidebar_position:8,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},c="Play The Doll",d={},o=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Play Structure",id:"play-structure",level:2},{value:"Story Summary",id:"story-summary",level:3},{value:"Scene Progression",id:"scene-progression",level:3},{value:"Costumes",id:"costumes",level:2},{value:"Costume Definitions",id:"costume-definitions",level:3},{value:"Available Costumes",id:"available-costumes",level:3},{value:"Scripts",id:"scripts",level:2},{value:"Solo Performance Scripts",id:"solo-performance-scripts",level:3},{value:"BLACKSMITH_SOLILOQUY",id:"blacksmith-soliloquy",level:4},{value:"KING_SOLILOQUY",id:"king-soliloquy",level:4},{value:"FOOL_SOLILOQUY",id:"fool-soliloquy",level:4},{value:"TREE_SOLILOQUY",id:"tree-soliloquy",level:4},{value:"REUNION",id:"reunion",level:4},{value:"Main Play Scripts",id:"main-play-scripts",level:3},{value:"ACT1_SCENE1",id:"act1-scene1",level:4},{value:"ACT1_SCENE2",id:"act1-scene2",level:4},{value:"ACT1_SCENE3",id:"act1-scene3",level:4},{value:"ACT2_SCENE4",id:"act2-scene4",level:4},{value:"ACT2_SCENE5",id:"act2-scene5",level:4},{value:"ACT2_SCENE6",id:"act2-scene6",level:4},{value:"ACT3_SCENE7",id:"act3-scene7",level:4},{value:"ACT3_SCENE8",id:"act3-scene8",level:4},{value:"ACT3_SCENE9",id:"act3-scene9",level:4},{value:"Technical Features",id:"technical-features",level:2},{value:"Marionette Effects",id:"marionette-effects",level:3},{value:"Music Integration",id:"music-integration",level:3},{value:"Position Management",id:"position-management",level:3},{value:"Sound Effects",id:"sound-effects",level:3},{value:"Integration Example",id:"integration-example",level:2},{value:"Play Flow Control",id:"play-flow-control",level:2},{value:"Related Modules",id:"related-modules",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"play-the-doll",children:"Play The Doll"})}),"\n",(0,l.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Build Version"}),(0,l.jsx)(n.th,{children:"Change Date"}),(0,l.jsx)(n.th,{children:"Change Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"676042"}),(0,l.jsx)(n.td,{children:"2025-06-21"}),(0,l.jsx)(n.td,{children:"stable"}),(0,l.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"play_the_doll"}),' module implements "The Enchanted Doll" - a complete multi-act theatrical performance for the Don\'t Starve Together stage play system. This fairy tale tells the story of a magical doll who comes to life, faces challenges, and ultimately finds her true form. The play features 9 scenes across 3 acts with multiple characters, costumes, and story progression.']}),"\n",(0,l.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local doll_play = require("play_the_doll")\n\n-- Access costume definitions\nlocal costumes = doll_play.costumes\nlocal doll_costume = costumes["DOLL"]\n\n-- Access play scripts\nlocal scripts = doll_play.scripts\nlocal first_scene = scripts["ACT1_SCENE1"]\n\n-- Get starting act\nlocal starting_act = doll_play.starting_act  -- "ACT1_SCENE1"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"play-structure",children:"Play Structure"}),"\n",(0,l.jsx)(n.h3,{id:"story-summary",children:"Story Summary"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:'"The Enchanted Doll"'})," follows the journey of a magical doll through three acts:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Act 1"}),": Introduction of the doll, her magic sleep, and encounter with a blacksmith and king"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Act 2"}),": The doll's transformation, interaction with a magic mirror, and confrontation with the king"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Act 3"}),": The doll's final transformation into a queen and resolution with the mirror"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"scene-progression",children:"Scene Progression"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Scene"}),(0,l.jsx)(n.th,{children:"Cast"}),(0,l.jsx)(n.th,{children:"Description"}),(0,l.jsx)(n.th,{children:"Next Scene"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT1_SCENE1"}),(0,l.jsx)(n.td,{children:"DOLL"}),(0,l.jsx)(n.td,{children:"Doll awakens and discovers her magic"}),(0,l.jsx)(n.td,{children:"ACT1_SCENE2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT1_SCENE2"}),(0,l.jsx)(n.td,{children:"DOLL, BLACKSMITH"}),(0,l.jsx)(n.td,{children:"Blacksmith works while doll sleeps and breaks"}),(0,l.jsx)(n.td,{children:"ACT1_SCENE3"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT1_SCENE3"}),(0,l.jsx)(n.td,{children:"DOLL_BROKEN, KING"}),(0,l.jsx)(n.td,{children:"King meets the broken doll and helps her"}),(0,l.jsx)(n.td,{children:"ACT2_SCENE4"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT2_SCENE4"}),(0,l.jsx)(n.td,{children:"DOLL_BROKEN, KING, MIRROR"}),(0,l.jsx)(n.td,{children:"Magic mirror repairs the doll"}),(0,l.jsx)(n.td,{children:"ACT2_SCENE5"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT2_SCENE5"}),(0,l.jsx)(n.td,{children:"DOLL_REPAIRED, MIRROR"}),(0,l.jsx)(n.td,{children:"Repaired doll talks with mirror"}),(0,l.jsx)(n.td,{children:"ACT2_SCENE6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT2_SCENE6"}),(0,l.jsx)(n.td,{children:"DOLL_REPAIRED, KING"}),(0,l.jsx)(n.td,{children:"Conflict between doll and king"}),(0,l.jsx)(n.td,{children:"ACT3_SCENE7"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT3_SCENE7"}),(0,l.jsx)(n.td,{children:"FOOL, DOLL_REPAIRED"}),(0,l.jsx)(n.td,{children:"Fool encounters the doll"}),(0,l.jsx)(n.td,{children:"ACT3_SCENE8"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT3_SCENE8"}),(0,l.jsx)(n.td,{children:"KING, FOOL, DOLL_REPAIRED"}),(0,l.jsx)(n.td,{children:"Doll transforms into queen, king dies and revives"}),(0,l.jsx)(n.td,{children:"ACT3_SCENE9"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ACT3_SCENE9"}),(0,l.jsx)(n.td,{children:"MIRROR, QUEEN"}),(0,l.jsx)(n.td,{children:"Final resolution between queen and mirror"}),(0,l.jsx)(n.td,{children:"ACT1_SCENE1"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"costumes",children:"Costumes"}),"\n",(0,l.jsx)(n.h3,{id:"costume-definitions",children:"Costume Definitions"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'costumes = {\n    ["DOLL"] = {\n        body = "costume_doll_body",\n        head = "mask_dollhat",\n        name = STRINGS.CAST.DOLL\n    },\n    -- ... other costume definitions\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"available-costumes",children:"Available Costumes"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Costume"}),(0,l.jsx)(n.th,{children:"Body"}),(0,l.jsx)(n.th,{children:"Head"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DOLL"}),(0,l.jsx)(n.td,{children:"costume_doll_body"}),(0,l.jsx)(n.td,{children:"mask_dollhat"}),(0,l.jsx)(n.td,{children:"Original magical doll"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DOLL_BROKEN"}),(0,l.jsx)(n.td,{children:"costume_doll_body"}),(0,l.jsx)(n.td,{children:"mask_dollbrokenhat"}),(0,l.jsx)(n.td,{children:"Doll after being broken"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DOLL_REPAIRED"}),(0,l.jsx)(n.td,{children:"costume_doll_body"}),(0,l.jsx)(n.td,{children:"mask_dollrepairedhat"}),(0,l.jsx)(n.td,{children:"Doll after magical repair"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"KING"}),(0,l.jsx)(n.td,{children:"costume_king_body"}),(0,l.jsx)(n.td,{children:"mask_kinghat"}),(0,l.jsx)(n.td,{children:"Royal king character"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"BLACKSMITH"}),(0,l.jsx)(n.td,{children:"costume_blacksmith_body"}),(0,l.jsx)(n.td,{children:"mask_blacksmithhat"}),(0,l.jsx)(n.td,{children:"Craftsman character"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"QUEEN"}),(0,l.jsx)(n.td,{children:"costume_queen_body"}),(0,l.jsx)(n.td,{children:"mask_queenhat"}),(0,l.jsx)(n.td,{children:"Final form of the doll"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"TREE"}),(0,l.jsx)(n.td,{children:"costume_tree_body"}),(0,l.jsx)(n.td,{children:"mask_treehat"}),(0,l.jsx)(n.td,{children:"Nature spirit character"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"MIRROR"}),(0,l.jsx)(n.td,{children:"costume_mirror_body"}),(0,l.jsx)(n.td,{children:"mask_mirrorhat"}),(0,l.jsx)(n.td,{children:"Magic mirror character"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"FOOL"}),(0,l.jsx)(n.td,{children:"costume_fool_body"}),(0,l.jsx)(n.td,{children:"mask_foolhat"}),(0,l.jsx)(n.td,{children:"Court jester character"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,l.jsx)(n.h3,{id:"solo-performance-scripts",children:"Solo Performance Scripts"}),"\n",(0,l.jsx)(n.h4,{id:"blacksmith-soliloquy",children:"BLACKSMITH_SOLILOQUY"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nSolo performance featuring the blacksmith character discussing his craft and dedication to work."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BLACKSMITH"}),": Player wearing blacksmith costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Uses marionette effects"}),"\n",(0,l.jsx)(n.li,{children:"Includes bird commentary"}),"\n",(0,l.jsx)(n.li,{children:"Bow sequences for theatrical presentation"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"king-soliloquy",children:"KING_SOLILOQUY"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nSolo performance showcasing the king's royal authority and wisdom."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"KING"}),": Player wearing king costume"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"fool-soliloquy",children:"FOOL_SOLILOQUY"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nSolo performance featuring the fool's wit and humor, with disappointed bird reactions."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FOOL"}),": Player wearing fool costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Special Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Bird shows disappointment (",(0,l.jsx)(n.code,{children:'sgparam="disappointed"'}),")"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"tree-soliloquy",children:"TREE_SOLILOQUY"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nSolo performance where the narrator speaks for the tree spirit, with excited bird commentary."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TREE"}),": Player wearing tree costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Special Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Uses NARRATOR role instead of TREE for dialogue"}),"\n",(0,l.jsxs)(n.li,{children:["Birds show excitement (",(0,l.jsx)(n.code,{children:'sgparam="excited"'}),")"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"reunion",children:"REUNION"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nTwo-character scene featuring an emotional reunion between the queen and blacksmith."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"QUEEN"}),": Player wearing queen costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BLACKSMITH"}),": Player wearing blacksmith costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Special Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Includes audience commentary from Winona characters"}),"\n",(0,l.jsx)(n.li,{children:"Emotional animations (spooked, various expressions)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"main-play-scripts",children:"Main Play Scripts"}),"\n",(0,l.jsx)(n.h4,{id:"act1-scene1",children:"ACT1_SCENE1"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nOpening scene introducing the magical doll who awakens from enchanted sleep."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL"}),": Player wearing doll costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[1]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT1_SCENE2"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Music"}),": Happy background music"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Duration"}),": ~35 seconds of dialogue and action"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Special Animations"}),": yawn, swoon"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sound Effects"}),": Intro stinger, outro stinger"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act1-scene2",children:"ACT1_SCENE2"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nScene where the blacksmith works while the doll sleeps, leading to the doll breaking."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL"}),": Player wearing doll costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BLACKSMITH"}),": Player wearing blacksmith costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[2]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT1_SCENE3"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Costume Change"}),": DOLL transforms to DOLL_BROKEN via ",(0,l.jsx)(n.code,{children:"fn.swapmask"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Building Animation"}),": Blacksmith performs crafting sequence"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sound Effects"}),": Dramatic stinger during transformation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Audience Interaction"}),": Winona crowd comments"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act1-scene3",children:"ACT1_SCENE3"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nThe king discovers the broken doll and offers to help her."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL_BROKEN"}),": Player wearing broken doll costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"KING"}),": Player wearing king costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[3]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT2_SCENE4"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Character Interactions"}),": King shows kindness to broken doll"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Animations"}),": waving, laughing, shrugging, cheering"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act2-scene4",children:"ACT2_SCENE4"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nThe magic mirror appears and uses the king's power to repair the doll."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL_BROKEN"}),": Player wearing broken doll costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"KING"}),": Player wearing king costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MIRROR"}),": Player wearing mirror costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[4]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT2_SCENE5"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Music"}),": Mysterious background music"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Transformation"}),": DOLL_BROKEN becomes DOLL_REPAIRED"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Magic Effects"}),": Magic blast stinger, death/revival sequence"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Maxwell Crowd Comment"}),": Audience reaction to magic"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act2-scene5",children:"ACT2_SCENE5"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nThe repaired doll converses with the magic mirror about her new state."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL_REPAIRED"}),": Player wearing repaired doll costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MIRROR"}),": Player wearing mirror costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[5]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT2_SCENE6"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Character Development"}),": Doll shows new determination"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Animations"}),": fist shake (showing anger/determination)"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act2-scene6",children:"ACT2_SCENE6"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nConfrontation between the repaired doll and the king, ending in conflict."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL_REPAIRED"}),": Player wearing repaired doll costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"KING"}),": Player wearing king costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[6]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT3_SCENE7"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Music"}),": Dramatic background music"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Conflict"}),": Magic battle with blast effects"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Character Exit"}),": King retreats after magical confrontation"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act3-scene7",children:"ACT3_SCENE7"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nThe fool encounters the doll and offers his perspective on her situation."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FOOL"}),": Player wearing fool costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL_REPAIRED"}),": Player wearing repaired doll costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[7]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT3_SCENE8"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Character Positioning"}),": FOOL front, DOLL_REPAIRED back left"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Wisdom"}),": Fool provides insight despite his comic nature"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act3-scene8",children:"ACT3_SCENE8"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nClimactic scene where the doll transforms into a queen, the king dies and revives."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"KING"}),": Player wearing king costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FOOL"}),": Player wearing fool costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DOLL_REPAIRED"}),": Player wearing repaired doll costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[8]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT3_SCENE9"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Transformation"}),": DOLL_REPAIRED becomes QUEEN via costume swap"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Death/Revival"}),": King dies and comes back to life"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sound Effects"}),": Dramatic stinger for transformation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dance Sequence"}),": Fool performs extended dance"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"act3-scene9",children:"ACT3_SCENE9"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"}),"\nFinal scene resolving the relationship between the queen and magic mirror."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cast Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MIRROR"}),": Player wearing mirror costume"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"QUEEN"}),": Player wearing queen costume"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Script Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Playbill"}),": STRINGS.PLAYS.THE_ENCHANTED_DOLL[9]"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Next Scene"}),": ACT1_SCENE1 (loops back to beginning)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Music"}),": Dramatic music for finale"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Resolution"}),": Queen and mirror reach understanding"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Finale"}),": Queen performs kiss animation, mirror bows"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"technical-features",children:"Technical Features"}),"\n",(0,l.jsx)(n.h3,{id:"marionette-effects",children:"Marionette Effects"}),"\n",(0,l.jsx)(n.p,{children:"All main play scenes use marionette effects:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Duration"}),": 1.1 seconds (MARIONETTE_TIME constant)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Visual"}),": Marionette appear/disappear effects on non-bird, non-narrator cast"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Timing"}),": Applied at scene start and end"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"music-integration",children:"Music Integration"}),"\n",(0,l.jsx)(n.p,{children:"The play uses different musical themes:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:'"happy"'}),": Light, cheerful scenes (Act 1)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:'"mysterious"'}),": Magic and supernatural scenes (Act 2, Act 3)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:'"drama"'}),": Conflict and emotional scenes (Act 2 Scene 6, Act 3 Scene 9)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"position-management",children:"Position Management"}),"\n",(0,l.jsxs)(n.p,{children:["Actors are positioned using ",(0,l.jsx)(n.code,{children:"fn.findpositions"})," with stage position numbers:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Position 1"}),": Front center (main character spotlight)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Position 2-3"}),": Left and right (dialogue partners)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Position 4-5"}),": Back positions (background characters)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Position 6-10"}),": Various special positions for dramatic effect"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sound-effects",children:"Sound Effects"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Stingers"})," mark important moments:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Act 1 Intro"}),": ",(0,l.jsx)(n.code,{children:"stageplay_set/statue_lyre/stinger_intro_act1"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Act 2 Intro"}),": ",(0,l.jsx)(n.code,{children:"stageplay_set/statue_lyre/stinger_intro_act2"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Act 3 Intro"}),": ",(0,l.jsx)(n.code,{children:"stageplay_set/statue_lyre/stinger_intro_act3"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dramatic"}),": ",(0,l.jsx)(n.code,{children:"stageplay_set/statue_lyre/stinger_dramatic"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Magic Blast"}),": ",(0,l.jsx)(n.code,{children:"stageplay_set/statue_lyre/stinger_magicblast"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Outro"}),": ",(0,l.jsx)(n.code,{children:"stageplay_set/statue_lyre/stinger_outro"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"integration-example",children:"Integration Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local doll_play = require("play_the_doll")\nlocal fn = require("play_commonfn")\n\n-- Setup a scene\nlocal scene = doll_play.scripts["ACT1_SCENE1"]\nlocal costumes = doll_play.costumes\n\n-- Verify cast has proper costumes\nfor _, character in ipairs(scene.cast) do\n    local costume = costumes[character]\n    if costume then\n        -- Ensure player has costume.body and costume.head equipped\n    end\nend\n\n-- Execute scene\nfor _, line in ipairs(scene.lines) do\n    if line.actionfn then\n        line.actionfn(stage_inst, line, cast_data)\n    end\n    -- Handle other line types...\nend\n\n-- Progress to next scene\nlocal next_scene = scene.next\nif next_scene then\n    current_scene = doll_play.scripts[next_scene]\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"play-flow-control",children:"Play Flow Control"}),"\n",(0,l.jsx)(n.p,{children:"The play supports continuous looping:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Scenes progress linearly through the story"}),"\n",(0,l.jsxs)(n.li,{children:["Each scene specifies its ",(0,l.jsx)(n.code,{children:"next"})," scene"]}),"\n",(0,l.jsx)(n.li,{children:"ACT3_SCENE9 loops back to ACT1_SCENE1"}),"\n",(0,l.jsx)(n.li,{children:"Players can join at any scene if they have appropriate costumes"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-commonfn",children:"Play Common Functions"}),": Utility functions used throughout the play"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-generalscripts",children:"Play General Scripts"}),": Character-specific monologue scripts"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-the-veil",children:"Play The Veil"}),": Alternative multi-character play option"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);