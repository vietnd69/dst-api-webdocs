"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[49861],{19068:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"game-scripts/core-systems/game-mechanics/special-events/yotb-sewing","title":"YOTB Sewing","description":"Year of the Beefalo sewing system for costume recipe calculation and validation","source":"@site/docs/game-scripts/core-systems/game-mechanics/special-events/yotb_sewing.md","sourceDirName":"game-scripts/core-systems/game-mechanics/special-events","slug":"/game-scripts/core-systems/game-mechanics/special-events/yotb-sewing","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/yotb-sewing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"yotb-sewing","title":"YOTB Sewing","description":"Year of the Beefalo sewing system for costume recipe calculation and validation","sidebar_position":4,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"}}');var s=i(74848),r=i(28453);const l={id:"yotb-sewing",title:"YOTB Sewing",description:"Year of the Beefalo sewing system for costume recipe calculation and validation",sidebar_position:4,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},a="YOTB Sewing",d={},c=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Functions",id:"functions",level:2},{value:"IsRecipeValid(names)",id:"is-recipe-valid",level:3},{value:"CalculateRecipe(names)",id:"calculate-recipe",level:3},{value:"Internal Functions",id:"internal-functions",level:2},{value:"GetIngredientValues(prefablist)",id:"get-ingredient-values",level:3},{value:"GetCandidateRecipes(ingdata)",id:"get-candidate-recipes",level:3},{value:"Recipe Priority System",id:"recipe-priority-system",level:2},{value:"Priority Levels",id:"priority-levels",level:3},{value:"Priority Resolution",id:"priority-resolution",level:3},{value:"Recipe Data",id:"recipe-data",level:2},{value:"recipes Table",id:"recipes-table",level:3},{value:"Integration Example",id:"integration-example",level:2},{value:"Complete Sewing Workflow",id:"complete-sewing-workflow",level:3},{value:"Recipe Testing",id:"recipe-testing",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Empty Ingredients",id:"empty-ingredients",level:3},{value:"Invalid Ingredients",id:"invalid-ingredients",level:3},{value:"Insufficient Quantities",id:"insufficient-quantities",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Required Modules",id:"required-modules",level:3},{value:"Module Loading",id:"module-loading",level:3},{value:"Related Modules",id:"related-modules",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"yotb-sewing",children:"YOTB Sewing"})}),"\n",(0,s.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Build Version"}),(0,s.jsx)(n.th,{children:"Change Date"}),(0,s.jsx)(n.th,{children:"Change Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"676042"}),(0,s.jsx)(n.td,{children:"2025-06-21"}),(0,s.jsx)(n.td,{children:"stable"}),(0,s.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"yotb_sewing"})," module provides the recipe calculation and validation system for Year of the Beefalo (YOTB) costume sewing. It processes pattern fragment ingredients to determine valid costume recipes based on priority and availability."]}),"\n",(0,s.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local yotb_sewing = require("yotb_sewing")\n\n-- Check if a recipe is valid\nlocal ingredients = {"yotb_pattern_fragment_1", "yotb_pattern_fragment_1", "yotb_pattern_fragment_2"}\nlocal is_valid = yotb_sewing.IsRecipeValid(ingredients)\nprint("Recipe valid:", is_valid) -- true\n\n-- Calculate the best recipe\nlocal result_prefab, sewing_time = yotb_sewing.CalculateRecipe(ingredients)\nprint("Result:", result_prefab) -- "war_blueprint"\nprint("Time:", sewing_time) -- 1 (BASE_SEWING_TIME from tuning)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,s.jsx)(n.h3,{id:"is-recipe-valid",children:"IsRecipeValid(names)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," ",(0,s.jsx)(n.code,{children:"stable"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Description:"}),"\nValidates whether a given set of ingredient names can produce any valid costume recipe."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"names"})," (table): Array of ingredient prefab names"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["(boolean): ",(0,s.jsx)(n.code,{children:"true"})," if at least one valid recipe exists, ",(0,s.jsx)(n.code,{children:"false"})," otherwise"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Valid WAR costume ingredients\nlocal valid_ingredients = {\n    "yotb_pattern_fragment_1",\n    "yotb_pattern_fragment_1", \n    "yotb_pattern_fragment_2"\n}\nlocal result = yotb_sewing.IsRecipeValid(valid_ingredients) -- true\n\n-- Invalid ingredients (not enough fragments)\nlocal invalid_ingredients = {\n    "yotb_pattern_fragment_1"\n}\nlocal result = yotb_sewing.IsRecipeValid(invalid_ingredients) -- false\n'})}),"\n",(0,s.jsx)(n.h3,{id:"calculate-recipe",children:"CalculateRecipe(names)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," ",(0,s.jsx)(n.code,{children:"stable"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Description:"}),"\nCalculates the best costume recipe from a given set of ingredients based on priority ranking. Returns the highest priority valid recipe."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"names"})," (table): Array of ingredient prefab names"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"(string): Prefab name of the resulting costume blueprint"}),"\n",(0,s.jsx)(n.li,{children:"(number): Sewing time required for the recipe"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Multiple valid recipes (DOLL has higher priority than others)\nlocal ingredients = {\n    "yotb_pattern_fragment_2",\n    "yotb_pattern_fragment_2",\n    "yotb_pattern_fragment_3"\n}\nlocal prefab, time = yotb_sewing.CalculateRecipe(ingredients)\nprint(prefab) -- "doll_blueprint" (priority 2)\nprint(time) -- 1 (BASE_SEWING_TIME)\n\n-- WAR costume (highest priority when conditions met)\nlocal war_ingredients = {\n    "yotb_pattern_fragment_1",\n    "yotb_pattern_fragment_1",\n    "yotb_pattern_fragment_2"\n}\nlocal prefab, time = yotb_sewing.CalculateRecipe(war_ingredients)\nprint(prefab) -- "war_blueprint" (priority 1)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"internal-functions",children:"Internal Functions"}),"\n",(0,s.jsx)(n.h3,{id:"get-ingredient-values",children:"GetIngredientValues(prefablist)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," ",(0,s.jsx)(n.code,{children:"stable"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Description:"}),"\nInternal function that processes ingredient list into counted frequency table."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prefablist"})," (table): Array of prefab names"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"(table): Table mapping ingredient names to quantities"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Internal usage - counts duplicate ingredients\nlocal ingredients = {"yotb_pattern_fragment_1", "yotb_pattern_fragment_1", "yotb_pattern_fragment_2"}\nlocal counts = GetIngredientValues(ingredients)\n-- Returns: {\n--   ["yotb_pattern_fragment_1"] = 2,\n--   ["yotb_pattern_fragment_2"] = 1\n-- }\n'})}),"\n",(0,s.jsx)(n.h3,{id:"get-candidate-recipes",children:"GetCandidateRecipes(ingdata)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," ",(0,s.jsx)(n.code,{children:"stable"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Description:"}),"\nInternal function that finds all valid recipes for given ingredient data and sorts them by priority."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ingdata"})," (table): Ingredient frequency table from ",(0,s.jsx)(n.code,{children:"GetIngredientValues"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"(table): Array of valid recipe candidates sorted by priority (highest first)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Internal usage - finds and prioritizes valid recipes\nlocal ingdata = {\n    ["yotb_pattern_fragment_1"] = 2,\n    ["yotb_pattern_fragment_2"] = 1\n}\nlocal candidates = GetCandidateRecipes(ingdata)\n-- Returns array with WAR costume (priority 1) as first element\n'})}),"\n",(0,s.jsx)(n.h2,{id:"recipe-priority-system",children:"Recipe Priority System"}),"\n",(0,s.jsx)(n.p,{children:"The sewing system uses a priority-based recipe selection when multiple recipes are valid:"}),"\n",(0,s.jsx)(n.h3,{id:"priority-levels",children:"Priority Levels"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Priority"}),(0,s.jsx)(n.th,{children:"Costumes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"WAR"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"DOLL"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"ROBOT, NATURE, FORMAL, VICTORIAN, ICE, FESTIVE, BEAST"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"priority-resolution",children:"Priority Resolution"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Find Valid Recipes"}),": Test all recipes against ingredient requirements"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sort by Priority"}),": Order valid recipes by priority value (lower number = higher priority)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select Highest"}),": Choose the first recipe from the highest priority group"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tie Breaking"}),": When multiple recipes have the same priority, the first one encountered is selected"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- These ingredients can make FORMAL (priority 3) and VICTORIAN (priority 3)\nlocal ingredients = {\n    "yotb_pattern_fragment_1",\n    "yotb_pattern_fragment_2", \n    "yotb_pattern_fragment_2",\n    "yotb_pattern_fragment_2",\n    "yotb_pattern_fragment_3"\n}\n\n-- FORMAL requires: fragment_2 > 2 \u2713\n-- VICTORIAN requires: fragment_1 \u2265 1 AND fragment_2 \u2265 1 AND fragment_3 \u2265 1 \u2713\n-- Both have priority 3, so first valid one is selected\n'})}),"\n",(0,s.jsx)(n.h2,{id:"recipe-data",children:"Recipe Data"}),"\n",(0,s.jsx)(n.h3,{id:"recipes-table",children:"recipes Table"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," ",(0,s.jsx)(n.code,{children:"stable"})]}),"\n",(0,s.jsxs)(n.p,{children:["The module exposes a ",(0,s.jsx)(n.code,{children:"recipes"})," table containing all costume definitions from the ",(0,s.jsx)(n.code,{children:"yotb_costumes"})," module."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Structure:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local yotb_sewing = require("yotb_sewing")\nfor i, recipe in ipairs(yotb_sewing.recipes) do\n    print("Recipe:", recipe.skin_name)\n    print("Prefab:", recipe.prefab_name)\n    print("Priority:", recipe.priority)\n    print("Time:", recipe.time)\n    -- Test function available as recipe.test(ingredients)\nend\n'})}),"\n",(0,s.jsx)(n.h2,{id:"integration-example",children:"Integration Example"}),"\n",(0,s.jsx)(n.h3,{id:"complete-sewing-workflow",children:"Complete Sewing Workflow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local yotb_sewing = require("yotb_sewing")\n\n-- Player has collected various pattern fragments\nlocal player_inventory = {\n    "yotb_pattern_fragment_1",\n    "yotb_pattern_fragment_1",\n    "yotb_pattern_fragment_2",\n    "yotb_pattern_fragment_3"\n}\n\n-- Check if any costume can be made\nif yotb_sewing.IsRecipeValid(player_inventory) then\n    -- Calculate the best recipe\n    local costume_prefab, sewing_time = yotb_sewing.CalculateRecipe(player_inventory)\n    \n    print("Can create:", costume_prefab)\n    print("Sewing time:", sewing_time)\n    \n    -- This would trigger the actual sewing process\n    -- SpawnPrefab(costume_prefab)\nelse\n    print("No valid costume recipes available")\nend\n'})}),"\n",(0,s.jsx)(n.h3,{id:"recipe-testing",children:"Recipe Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local yotb_sewing = require("yotb_sewing")\n\n-- Test specific ingredient combinations\nlocal test_cases = {\n    -- WAR costume test\n    {\n        ingredients = {"yotb_pattern_fragment_1", "yotb_pattern_fragment_1", "yotb_pattern_fragment_2"},\n        expected = "war_blueprint"\n    },\n    -- DOLL costume test  \n    {\n        ingredients = {"yotb_pattern_fragment_2", "yotb_pattern_fragment_2", "yotb_pattern_fragment_3"},\n        expected = "doll_blueprint"\n    },\n    -- Invalid recipe test\n    {\n        ingredients = {"yotb_pattern_fragment_1"},\n        expected = nil\n    }\n}\n\nfor _, test in ipairs(test_cases) do\n    local is_valid = yotb_sewing.IsRecipeValid(test.ingredients)\n    if is_valid then\n        local result, time = yotb_sewing.CalculateRecipe(test.ingredients)\n        print("Test result:", result, "Expected:", test.expected)\n    else\n        print("Invalid recipe as expected")\n    end\nend\n'})}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"The sewing system handles edge cases gracefully:"}),"\n",(0,s.jsx)(n.h3,{id:"empty-ingredients",children:"Empty Ingredients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"local result = yotb_sewing.IsRecipeValid({}) -- false\nlocal prefab, time = yotb_sewing.CalculateRecipe({}) -- nil, nil\n"})}),"\n",(0,s.jsx)(n.h3,{id:"invalid-ingredients",children:"Invalid Ingredients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local invalid = {"invalid_item", "another_invalid_item"}\nlocal result = yotb_sewing.IsRecipeValid(invalid) -- false\n'})}),"\n",(0,s.jsx)(n.h3,{id:"insufficient-quantities",children:"Insufficient Quantities"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local insufficient = {"yotb_pattern_fragment_1"} -- Need at least 2 for most recipes\nlocal result = yotb_sewing.IsRecipeValid(insufficient) -- false\n'})}),"\n",(0,s.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsx)(n.h3,{id:"required-modules",children:"Required Modules"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tuning"}),": Provides ",(0,s.jsx)(n.code,{children:"TUNING.BASE_SEWING_TIME"})," constant"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"yotb_costumes"}),": Provides costume definitions and test functions"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"module-loading",children:"Module Loading"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'require "tuning"\nlocal set_data = require("yotb_costumes")\n'})}),"\n",(0,s.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/yotb-costumes",children:"YOTB Costumes"}),": Provides costume definitions and requirements"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./tuning.md",children:"Tuning"}),": Provides sewing time constants"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./beefalo_clothing.md",children:"Beefalo Clothing"}),": Related beefalo customization system"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);