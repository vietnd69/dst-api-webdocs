"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[2712],{8453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>a});var t=s(6540);const o={},i=t.createContext(o);function d(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:d(n.components),t.createElement(i.Provider,{value:e},n.children)}},9134:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>r,contentTitle:()=>a,default:()=>u,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"api-vanilla/core/sound-system","title":"Sound System","description":"Don\'t Starve Together\'s sound system enables developers to add audio feedback to their mods through sound effects, music, and ambient sounds. This document explains how to work with the sound system effectively.","source":"@site/docs/api-vanilla/core/sound-system.md","sourceDirName":"api-vanilla/core","slug":"/api-vanilla/core/sound-system","permalink":"/dst-api-webdocs/docs/api-vanilla/core/sound-system","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"id":"sound-system","title":"Sound System","sidebar_position":20}}');var o=s(4848),i=s(8453);const d={id:"sound-system",title:"Sound System",sidebar_position:20},a="Sound System",r={},l=[{value:"Overview",id:"overview",level:2},{value:"Basic Sound Setup",id:"basic-sound-setup",level:2},{value:"Adding a SoundEmitter Component",id:"adding-a-soundemitter-component",level:3},{value:"Playing Sounds",id:"playing-sounds",level:3},{value:"Stopping Sounds",id:"stopping-sounds",level:3},{value:"Advanced Sound Features",id:"advanced-sound-features",level:2},{value:"Looping Sounds",id:"looping-sounds",level:3},{value:"Sound Volume and Fading",id:"sound-volume-and-fading",level:3},{value:"Positional Audio",id:"positional-audio",level:3},{value:"Sound Parameters",id:"sound-parameters",level:3},{value:"Integration with Other Systems",id:"integration-with-other-systems",level:2},{value:"StateGraph Integration",id:"stategraph-integration",level:3},{value:"Event System Integration",id:"event-system-integration",level:3},{value:"Common Sound Practices",id:"common-sound-practices",level:2},{value:"Sound Assets Declaration",id:"sound-assets-declaration",level:3},{value:"Audio Feedback for User Interactions",id:"audio-feedback-for-user-interactions",level:3},{value:"Environmental Sound Effects",id:"environmental-sound-effects",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Commonly Used Sound Paths",id:"commonly-used-sound-paths",level:2},{value:"Player Actions",id:"player-actions",level:3},{value:"Entity Sounds",id:"entity-sounds",level:3},{value:"Interface Sounds",id:"interface-sounds",level:3},{value:"Environmental Sounds",id:"environmental-sounds",level:3},{value:"See Also",id:"see-also",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"sound-system",children:"Sound System"})}),"\n",(0,o.jsx)(e.p,{children:"Don't Starve Together's sound system enables developers to add audio feedback to their mods through sound effects, music, and ambient sounds. This document explains how to work with the sound system effectively."}),"\n",(0,o.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(e.p,{children:"The sound system in DST is composed of several key components:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"SoundEmitter Component"}),": Used to play and manage sound effects"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Audio Resources"}),": Sound files that can be played in-game"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Sound Banks"}),": Collections of audio resources"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Parameters"}),": Controls for volume, pitch, and other audio characteristics"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Events"}),": Triggers for playing or stopping sounds"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"basic-sound-setup",children:"Basic Sound Setup"}),"\n",(0,o.jsx)(e.h3,{id:"adding-a-soundemitter-component",children:"Adding a SoundEmitter Component"}),"\n",(0,o.jsxs)(e.p,{children:["The first step in playing sounds is adding a ",(0,o.jsx)(e.code,{children:"SoundEmitter"})," to your entity:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'local function fn()\n    local inst = CreateEntity()\n    \n    inst.entity:AddTransform()\n    inst.entity:AddNetwork()\n    \n    -- Add a SoundEmitter component\n    inst.entity:AddSoundEmitter()\n    \n    -- Rest of your entity setup...\n    \n    if not TheWorld.ismastersim then\n        return inst\n    end\n    \n    -- Play a sound on creation\n    inst.SoundEmitter:PlaySound("dontstarve/common/craftable/chest_craft")\n    \n    return inst\nend\n'})}),"\n",(0,o.jsx)(e.h3,{id:"playing-sounds",children:"Playing Sounds"}),"\n",(0,o.jsx)(e.p,{children:"The SoundEmitter component provides several methods for playing sounds:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Basic sound playback\ninst.SoundEmitter:PlaySound("path/to/sound")\n\n-- Play a sound with a specific volume (0.0 to 1.0)\ninst.SoundEmitter:PlaySound("path/to/sound", nil, 0.5)\n\n-- Play a sound with a specific name tag for later reference\ninst.SoundEmitter:PlaySound("path/to/loop_sound", "my_loop_sound")\n\n-- Play a sound with volume and pitch adjustment\ninst.SoundEmitter:PlaySound("path/to/sound", nil, 0.7, 1.2)\n'})}),"\n",(0,o.jsx)(e.h3,{id:"stopping-sounds",children:"Stopping Sounds"}),"\n",(0,o.jsx)(e.p,{children:"For looping sounds or when you need to stop a sound before it finishes:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Stop a sound by its name tag\ninst.SoundEmitter:KillSound("my_loop_sound")\n\n-- Stop all sounds being played by this emitter\ninst.SoundEmitter:KillAllSounds()\n'})}),"\n",(0,o.jsx)(e.h2,{id:"advanced-sound-features",children:"Advanced Sound Features"}),"\n",(0,o.jsx)(e.h3,{id:"looping-sounds",children:"Looping Sounds"}),"\n",(0,o.jsx)(e.p,{children:"To play sounds continuously:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Start a looping sound with a name tag for reference\ninst.SoundEmitter:PlaySound("dontstarve/common/fireAddFuel", "fire_loop")\n\n-- Later, stop the looping sound\ninst.SoundEmitter:KillSound("fire_loop")\n'})}),"\n",(0,o.jsx)(e.h3,{id:"sound-volume-and-fading",children:"Sound Volume and Fading"}),"\n",(0,o.jsx)(e.p,{children:"You can adjust the volume of sounds and create fade effects:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Play a sound at 50% volume\ninst.SoundEmitter:PlaySound("path/to/sound", nil, 0.5)\n\n-- Fade out a looping sound over 2 seconds\ninst.SoundEmitter:SetVolume("my_loop_sound", 0.5) -- Set to 50% volume\ninst.SoundEmitter:SetVolumeWithFade("my_loop_sound", 0.0, 2) -- Fade to silence over 2 seconds\n'})}),"\n",(0,o.jsx)(e.h3,{id:"positional-audio",children:"Positional Audio"}),"\n",(0,o.jsx)(e.p,{children:"For sounds that should come from a specific location:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Play a sound at a specific world position\nlocal x, y, z = inst.Transform:GetWorldPosition()\nTheFocalPoint.SoundEmitter:PlaySound("dontstarve/common/destroy_metal", nil, nil, nil, nil, nil, x, y, z)\n'})}),"\n",(0,o.jsx)(e.h3,{id:"sound-parameters",children:"Sound Parameters"}),"\n",(0,o.jsx)(e.p,{children:"Control various parameters of sound playback:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Play a sound with specific volume and pitch\ninst.SoundEmitter:PlaySound("path/to/sound", nil, 0.7, -- volume\n                                                 1.2) -- pitch modifier\n\n-- Play a sound with full control\ninst.SoundEmitter:PlaySound("path/to/sound", -- sound path\n                           "my_sound",      -- sound name\n                           0.8,             -- volume\n                           1.0,             -- pitch\n                           false,           -- is music\n                           true)            -- fade in\n'})}),"\n",(0,o.jsx)(e.h2,{id:"integration-with-other-systems",children:"Integration with Other Systems"}),"\n",(0,o.jsx)(e.h3,{id:"stategraph-integration",children:"StateGraph Integration"}),"\n",(0,o.jsx)(e.p,{children:"Sound effects are often played during animations using StateGraph events:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'local states = {\n    State{\n        name = "attack",\n        tags = {"attack", "busy"},\n        \n        onenter = function(inst)\n            inst.AnimState:PlayAnimation("attack")\n        end,\n        \n        timeline = {\n            -- Play sound at specific animation frames\n            TimeEvent(8*FRAMES, function(inst) \n                inst.SoundEmitter:PlaySound("dontstarve/common/swing")\n            end),\n            TimeEvent(12*FRAMES, function(inst) \n                inst.SoundEmitter:PlaySound("dontstarve/creatures/enemy/hit") \n            end),\n        },\n        \n        events = {\n            EventHandler("animover", function(inst) inst.sg:GoToState("idle") end),\n        },\n    },\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"event-system-integration",children:"Event System Integration"}),"\n",(0,o.jsx)(e.p,{children:"Trigger sounds in response to events:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Play a sound when the entity is attacked\ninst:ListenForEvent("attacked", function(inst, data)\n    inst.SoundEmitter:PlaySound("dontstarve/creatures/generic/hurt")\nend)\n\n-- Play different sounds based on actions\ninst:ListenForEvent("working", function(inst, data)\n    if data.target and data.target:HasTag("tree") then\n        inst.SoundEmitter:PlaySound("dontstarve/wilson/use_axe_tree")\n    elseif data.target and data.target:HasTag("rock") then\n        inst.SoundEmitter:PlaySound("dontstarve/wilson/use_pick_rock")\n    end\nend)\n'})}),"\n",(0,o.jsx)(e.h2,{id:"common-sound-practices",children:"Common Sound Practices"}),"\n",(0,o.jsx)(e.h3,{id:"sound-assets-declaration",children:"Sound Assets Declaration"}),"\n",(0,o.jsx)(e.p,{children:"When creating a prefab that uses custom sounds, include them in the assets:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'local assets = {\n    -- Texture assets\n    Asset("ANIM", "anim/my_item.zip"),\n    \n    -- Sound assets\n    Asset("SOUND", "sound/my_mod_sounds.fsb"),\n}\n\nlocal function fn()\n    local inst = CreateEntity()\n    \n    -- ... entity setup ...\n    inst.entity:AddSoundEmitter()\n    \n    -- ... more setup ...\n    \n    return inst\nend\n\nreturn Prefab("my_item", fn, assets)\n'})}),"\n",(0,o.jsx)(e.h3,{id:"audio-feedback-for-user-interactions",children:"Audio Feedback for User Interactions"}),"\n",(0,o.jsx)(e.p,{children:"Provide audio feedback for UI and gameplay interactions:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- In UI button click handlers\nOnClick = function(self)\n    TheFrontEnd:GetSound():PlaySound("dontstarve/HUD/click_move")\n    -- rest of click handling...\nend\n\n-- For item interactions\nfunction MyItem:OnUse(doer)\n    if self.inst.components.finiteuses and not self.inst.components.finiteuses:IsFull() then\n        self.inst.SoundEmitter:PlaySound("dontstarve/common/use_repair")\n    end\nend\n'})}),"\n",(0,o.jsx)(e.h3,{id:"environmental-sound-effects",children:"Environmental Sound Effects"}),"\n",(0,o.jsx)(e.p,{children:"Create immersive environments with ambient sounds:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Ambient sound that plays continuously\nlocal function StartAmbientSound(inst)\n    if not inst:IsAsleep() then\n        inst.SoundEmitter:PlaySound("dontstarve/common/campfire", "fire")\n        inst.SoundEmitter:SetVolume("fire", 0.2)\n    end\nend\n\nlocal function StopAmbientSound(inst)\n    inst.SoundEmitter:KillSound("fire")\nend\n\n-- Connect to game sleep/wake cycle\ninst:ListenForEvent("entitysleep", StopAmbientSound)\ninst:ListenForEvent("entitywake", StartAmbientSound)\n\n-- Start sounds initially\nStartAmbientSound(inst)\n'})}),"\n",(0,o.jsx)(e.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,o.jsx)(e.p,{children:"When working with sounds, keep these performance tips in mind:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Sound Pooling"}),": Limit concurrent sounds of the same type"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'-- Check if similar sound is already playing\nif not inst.SoundEmitter:PlayingSound("footstep") then\n    inst.SoundEmitter:PlaySound("dontstarve/movement/run_dirt", "footstep")\nend\n'})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Distance-Based Sound"}),": Don't play sounds that are too far from the player"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:"local function ShouldPlaySound(inst)\n    local player = ThePlayer\n    if player then\n        local dist = inst:GetDistanceSqToPoint(player.Transform:GetWorldPosition())\n        return dist < MAX_SOUND_RANGE_SQ\n    end\n    return false\nend\n"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Sound Cleanup"}),": Always clear sounds when entities are removed"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-lua",children:'local function OnRemove(inst)\n    inst.SoundEmitter:KillAllSounds()\nend\n\ninst:ListenForEvent("onremove", OnRemove)\n'})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"commonly-used-sound-paths",children:"Commonly Used Sound Paths"}),"\n",(0,o.jsx)(e.p,{children:"Here are some commonly used sound paths in Don't Starve Together:"}),"\n",(0,o.jsx)(e.h3,{id:"player-actions",children:"Player Actions"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/wilson/use_axe_tree"'})," - Chopping trees"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/wilson/use_pick_rock"'})," - Mining rocks"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/wilson/dig"'})," - Digging"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"entity-sounds",children:"Entity Sounds"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/creatures/generic/hurt"'})," - Generic hurt sound"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/creatures/generic/die"'})," - Generic death sound"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/creatures/generic/eat"'})," - Eating sound"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"interface-sounds",children:"Interface Sounds"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/HUD/click_move"'})," - UI click sound"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/HUD/craft_open"'})," - Opening crafting menu"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/HUD/craft_close"'})," - Closing crafting menu"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"environmental-sounds",children:"Environmental Sounds"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/common/fire"'})," - Fire burning loop"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/rain/rain_on"'})," - Rain beginning"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:'"dontstarve/common/together/fire/fireout"'})," - Fire going out"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"see-also",children:"See Also"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"/dst-api-webdocs/docs/api-vanilla/core/particle-effects",children:"Particle Effects System"})," - For visual effects to pair with sounds"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"/dst-api-webdocs/docs/api-vanilla/core/stategraph-system",children:"Stategraph System"})," - For coordinating sounds with animations"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"/dst-api-webdocs/docs/api-vanilla/core/entity-system",children:"Entity System"})," - For understanding entity components"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"/dst-api-webdocs/docs/api-vanilla/core/event-system",children:"Event System"})," - For triggering sounds based on game events"]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"By mastering the sound system in Don't Starve Together, you can create immersive audio experiences that provide important feedback and enhance the atmosphere of your mods."})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}}}]);