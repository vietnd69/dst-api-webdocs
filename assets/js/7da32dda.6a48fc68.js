"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[2049],{4638:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"api-vanilla/components/weapon","title":"Weapon","description":"Last Update: 2023-07-06","source":"@site/docs/api-vanilla/components/weapon.md","sourceDirName":"api-vanilla/components","slug":"/api-vanilla/components/weapon","permalink":"/dst-api-webdocs/docs/api-vanilla/components/weapon","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"weapon","title":"Weapon","sidebar_position":5,"last_updated":"2023-07-06T00:00:00.000Z","version":619045},"sidebar":"docs","previous":{"title":"Inventory","permalink":"/dst-api-webdocs/docs/api-vanilla/components/inventory"},"next":{"title":"Temperature","permalink":"/dst-api-webdocs/docs/api-vanilla/components/temperature"}}');var i=t(4848),o=t(8453);const s={id:"weapon",title:"Weapon",sidebar_position:5,last_updated:new Date("2023-07-06T00:00:00.000Z"),version:619045},c="Weapon Component",r={},l=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Properties",id:"properties",level:2},{value:"Key Methods",id:"key-methods",level:2},{value:"Damage Configuration",id:"damage-configuration",level:3},{value:"Projectile Configuration",id:"projectile-configuration",level:3},{value:"Special Damage Types",id:"special-damage-types",level:3},{value:"Attack Callbacks",id:"attack-callbacks",level:3},{value:"Attack Process",id:"attack-process",level:2},{value:"Integration with Other Components",id:"integration-with-other-components",level:2},{value:"See also",id:"see-also",level:2},{value:"Examples",id:"examples",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Last Update: 2023-07-06"})}),"\n",(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"weapon-component",children:"Weapon Component"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"API Version: 619045"})}),"\n",(0,i.jsx)(n.p,{children:"The Weapon component defines an item that can be used to attack entities. It manages damage values, attack ranges, and special weapon effects like projectiles and elemental damage."}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Add a weapon component to an entity\nlocal entity = CreateEntity()\nentity:AddComponent("weapon")\n\n-- Configure the weapon component\nlocal weapon = entity.components.weapon\nweapon:SetDamage(20)\nweapon:SetRange(3, 3)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"damage"})}),(0,i.jsx)(n.td,{children:"Number"}),(0,i.jsx)(n.td,{children:"Base damage dealt by the weapon"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"attackrange"})}),(0,i.jsx)(n.td,{children:"Number"}),(0,i.jsx)(n.td,{children:"The maximum distance at which the weapon can initiate an attack"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"hitrange"})}),(0,i.jsx)(n.td,{children:"Number"}),(0,i.jsx)(n.td,{children:"The maximum distance at which the weapon can hit targets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"projectile"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"Prefab name of projectile this weapon launches (if any)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"stimuli"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:'Type of damage stimuli (e.g., "electric", "fire")'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"electric_damage_mult"})}),(0,i.jsx)(n.td,{children:"Number"}),(0,i.jsx)(n.td,{children:"Damage multiplier for electric-type weapons"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"electric_wet_damage_mult"})}),(0,i.jsx)(n.td,{children:"Number"}),(0,i.jsx)(n.td,{children:"Additional damage multiplier against wet targets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"attackwear"})}),(0,i.jsx)(n.td,{children:"Number"}),(0,i.jsx)(n.td,{children:"Amount of durability lost when attacking"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"key-methods",children:"Key Methods"}),"\n",(0,i.jsx)(n.h3,{id:"damage-configuration",children:"Damage Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Set base damage\nweapon:SetDamage(25)\n\n-- Set attack and hit ranges\nweapon:SetRange(4, 4) -- 4 for both attack and hit range\n\n-- Get damage against a specific target\nlocal damage, special_damage = weapon:GetDamage(attacker, target)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"projectile-configuration",children:"Projectile Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Set weapon to shoot projectiles\nweapon:SetProjectile("spear_projectile")\n\n-- Set offset for projectile spawning\nweapon:SetProjectileOffset(1.5)\n\n-- Set callback for when projectile is launched\nweapon:SetOnProjectileLaunch(function(inst, attacker, target)\n    -- Do something when projectile is launched\nend)\n\n-- Set callback for after projectile is launched\nweapon:SetOnProjectileLaunched(function(inst, attacker, target, projectile)\n    -- Do something after projectile is launched and projectile entity exists\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"special-damage-types",children:"Special Damage Types"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Set weapon to deal electric damage\nweapon:SetElectric(1.5, 2.0) -- 1.5x base damage, 2.0x against wet targets\n\n-- Set custom override for stimulus type\nweapon:SetOverrideStimuliFn(function(inst, target)\n    -- Return a custom stimulus type based on conditions\n    return "fire"\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"attack-callbacks",children:"Attack Callbacks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Set callback for when weapon attacks\nweapon:SetOnAttack(function(inst, attacker, target)\n    -- Do something when this weapon hits a target\nend)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"attack-process",children:"Attack Process"}),"\n",(0,i.jsx)(n.p,{children:"When a weapon attacks:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["The game calls ",(0,i.jsx)(n.code,{children:"weapon:GetDamage(attacker, target)"})," to determine damage"]}),"\n",(0,i.jsx)(n.li,{children:"If the weapon has durability (FiniteUses component), uses are consumed"}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"onattack"})," callback is defined, it's triggered"]}),"\n",(0,i.jsx)(n.li,{children:"If the weapon has a projectile, it's launched at the target"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For projectile weapons:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"onprojectilelaunch"})," callback is triggered (if defined)"]}),"\n",(0,i.jsx)(n.li,{children:"Projectile prefab is spawned"}),"\n",(0,i.jsx)(n.li,{children:"Projectile is launched at the target"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"onprojectilelaunched"})," callback is triggered (if defined)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-other-components",children:"Integration with Other Components"}),"\n",(0,i.jsx)(n.p,{children:"The Weapon component often works with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Combat"})," - For attack mechanics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Inventory"})," - For equipping the weapon"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FiniteUses"})," - For weapon durability"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Projectile"})," - For projectile behavior"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DamageTypeBonus"})," - For bonus damage against specific types"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/combat",children:"Combat Component"})," - For attack mechanics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/equippable",children:"Equippable Component"})," - For weapons that can be equipped"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/inventory",children:"Inventory Component"})," - For storing and equipping weapons"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/armor",children:"Armor Component"})," - For protection against weapon damage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/health",children:"Health Component"})," - For receiving weapon damage"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Create a basic sword\nlocal function MakeSword()\n    local inst = CreateEntity()\n    \n    -- Add required components\n    inst:AddComponent("weapon")\n    inst:AddComponent("inventoryitem")\n    inst:AddComponent("finiteuses")\n    \n    -- Configure weapon\n    local weapon = inst.components.weapon\n    weapon:SetDamage(30)\n    weapon:SetRange(2, 2)\n    \n    -- Configure durability\n    inst.components.finiteuses:SetMaxUses(150)\n    inst.components.finiteuses:SetUses(150)\n    \n    -- Set attack wear\n    weapon.attackwear = 1\n    \n    return inst\nend\n\n-- Create a ranged weapon with projectiles\nlocal function MakeBow()\n    local inst = CreateEntity()\n    \n    -- Add required components\n    inst:AddComponent("weapon")\n    inst:AddComponent("inventoryitem")\n    inst:AddComponent("finiteuses")\n    \n    -- Configure weapon\n    local weapon = inst.components.weapon\n    weapon:SetDamage(20)\n    weapon:SetRange(8, 8)\n    weapon:SetProjectile("arrow")\n    \n    -- Add special effects when projectile launches\n    weapon:SetOnProjectileLaunch(function(inst, attacker, target)\n        -- Play sound or animation\n    end)\n    \n    return inst\nend\n\n-- Create an elemental weapon\nlocal function MakeElectricWeapon()\n    local inst = CreateEntity()\n    \n    -- Add required components\n    inst:AddComponent("weapon")\n    inst:AddComponent("inventoryitem")\n    \n    -- Configure weapon\n    local weapon = inst.components.weapon\n    weapon:SetDamage(15)\n    weapon:SetElectric(1.3, 2.0) -- 1.3x damage, 2.0x against wet targets\n    \n    -- Add effect when attacking\n    weapon:SetOnAttack(function(inst, attacker, target)\n        -- Create electric visual effect\n        SpawnPrefab("electrichitsparks"):AlignToTarget(target)\n    end)\n    \n    return inst\nend\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var a=t(6540);const i={},o=a.createContext(i);function s(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);