"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[31307],{22877:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"game-scripts/core-systems/data-management/assets/klump_files","title":"Klump Files","description":"Auto-generated registry of encrypted klump files for festival events","source":"@site/docs/game-scripts/core-systems/data-management/assets/klump_files.md","sourceDirName":"game-scripts/core-systems/data-management/assets","slug":"/game-scripts/core-systems/data-management/assets/klump_files","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/klump_files","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"klump_files","title":"Klump Files","description":"Auto-generated registry of encrypted klump files for festival events","sidebar_position":3,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Klump","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/klump"},"next":{"title":"Mixes","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/mixes"}}');var l=i(74848),t=i(28453);const r={id:"klump_files",title:"Klump Files",description:"Auto-generated registry of encrypted klump files for festival events",sidebar_position:3,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},d="Klump Files",a={},o=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"File Structure",id:"file-structure",level:2},{value:"Current State",id:"current-state",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"File Format",id:"file-format",level:2},{value:"Standard Klump Files",id:"standard-klump-files",level:3},{value:"String Klump Files",id:"string-klump-files",level:3},{value:"Generation Process",id:"generation-process",level:2},{value:"Build Script Integration",id:"build-script-integration",level:3},{value:"File Categories",id:"file-categories",level:3},{value:"Integration with Klump System",id:"integration-with-klump-system",level:2},{value:"Loading Process",id:"loading-process",level:3},{value:"Festival Event Context",id:"festival-event-context",level:3},{value:"File Path Conventions",id:"file-path-conventions",level:2},{value:"Asset Path Format",id:"asset-path-format",level:3},{value:"String Path Format",id:"string-path-format",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Encrypted Content",id:"encrypted-content",level:3},{value:"Content Distribution",id:"content-distribution",level:3},{value:"Performance Impact",id:"performance-impact",level:2},{value:"Loading Optimization",id:"loading-optimization",level:3},{value:"Memory Considerations",id:"memory-considerations",level:3},{value:"Debugging and Development",id:"debugging-and-development",level:2},{value:"Empty Registry State",id:"empty-registry-state",level:3},{value:"Development Workflow",id:"development-workflow",level:3},{value:"Related Modules",id:"related-modules",level:2},{value:"Build System Integration",id:"build-system-integration",level:2},{value:"Automated Generation",id:"automated-generation",level:3},{value:"Validation",id:"validation",level:3},{value:"Future Considerations",id:"future-considerations",level:2},{value:"Potential Enhancements",id:"potential-enhancements",level:3},{value:"Scalability",id:"scalability",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"klump-files",children:"Klump Files"})}),"\n",(0,l.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Build Version"}),(0,l.jsx)(n.th,{children:"Change Date"}),(0,l.jsx)(n.th,{children:"Change Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"676042"}),(0,l.jsx)(n.td,{children:"2025-06-21"}),(0,l.jsx)(n.td,{children:"stable"}),(0,l.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"klump_files"})," module is an auto-generated registry that contains a list of encrypted klump files available for loading. This module is generated by the ",(0,l.jsx)(n.code,{children:"klump.py"})," build script and serves as a manifest for the ",(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/klump",children:"klump"})," loading system."]}),"\n",(0,l.jsx)(n.h2,{id:"file-structure",children:"File Structure"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"--Autogenerated by klump.py\nreturn {\n    -- List of klump file paths\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"current-state",children:"Current State"}),"\n",(0,l.jsxs)(n.p,{children:["The file currently returns an empty table ",(0,l.jsx)(n.code,{children:"{}"}),", indicating no klump files are registered in the current build."]}),"\n",(0,l.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Load all registered klump files\nlocal klump_files = require("klump_files")\n\nfor _, file in pairs(klump_files) do\n    local klump_file = string.gsub(file, "klump/", "")\n    local is_strings = string.sub(klump_file, 1, 8) == "strings/"\n    \n    if is_strings then\n        klump_file = string.gsub(klump_file, "strings/", "")\n    end\n    \n    local cipher = Profile:GetKlumpCipher(klump_file)\n    if cipher ~= nil then\n        if is_strings then\n            LoadKlumpString(klump_file, cipher, true)\n        else\n            LoadKlumpFile(klump_file, cipher, true)\n        end\n    end\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"file-format",children:"File Format"}),"\n",(0,l.jsx)(n.h3,{id:"standard-klump-files",children:"Standard Klump Files"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'return {\n    "klump/images/quagmire_food_inv_images_potato.tex",\n    "klump/images/quagmire_food_inv_images_hires_potato.tex", \n    "klump/anim/dynamic/potato.dyn",\n    -- Additional asset files...\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"string-klump-files",children:"String Klump Files"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'return {\n    "klump/strings/STRINGS.NAMES.POTATO",\n    "klump/strings/STRINGS.RECIPE_DESC.POTATO_SOUP",\n    -- Additional string entries...\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"generation-process",children:"Generation Process"}),"\n",(0,l.jsx)(n.h3,{id:"build-script-integration",children:"Build Script Integration"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"klump.py"})," script scans for encrypted assets and generates this file during the build process:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Asset Discovery:"})," Scans designated directories for ",(0,l.jsx)(n.code,{children:".klump"})," encrypted files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Path Processing:"})," Generates standardized paths with ",(0,l.jsx)(n.code,{children:"klump/"})," prefix"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File Generation:"})," Creates the Lua module with the complete file list"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Build Integration:"})," Updates the file as part of the automated build pipeline"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"file-categories",children:"File Categories"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Asset Files:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"images/"})," - Texture and image files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"anim/dynamic/"})," - Animation data files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"sounds/"})," - Audio files (if applicable)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"String Files:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"strings/"})," - Localized text data"]}),"\n",(0,l.jsxs)(n.li,{children:["Format: ",(0,l.jsx)(n.code,{children:"strings/STRINGS.CATEGORY.ITEM_NAME"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"integration-with-klump-system",children:"Integration with Klump System"}),"\n",(0,l.jsx)(n.h3,{id:"loading-process",children:"Loading Process"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Module Import:"})," ",(0,l.jsx)(n.code,{children:'require("klump_files")'})," returns the file list"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Path Processing:"})," Removes ",(0,l.jsx)(n.code,{children:"klump/"})," prefix for internal handling"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Type Detection:"})," Identifies string files by ",(0,l.jsx)(n.code,{children:"strings/"})," prefix"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cipher Resolution:"})," Retrieves decryption keys from player profile"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Conditional Loading:"})," Only loads files with valid ciphers"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"festival-event-context",children:"Festival Event Context"}),"\n",(0,l.jsx)(n.p,{children:"The klump_files registry is primarily used during festival events:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Quagmire Festival:"})," Contains food-related assets and strings"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Event Activation:"})," Files are loaded when festivals become active"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dynamic Content:"})," Enables secure distribution of event-specific content"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"file-path-conventions",children:"File Path Conventions"}),"\n",(0,l.jsx)(n.h3,{id:"asset-path-format",children:"Asset Path Format"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"klump/[category]/[subcategory]/[filename].[extension]\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"klump/images/quagmire_food_inv_images_potato.tex"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"klump/anim/dynamic/potato.dyn"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"string-path-format",children:"String Path Format"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"klump/strings/[string_hierarchy]\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"klump/strings/STRINGS.NAMES.POTATO"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"klump/strings/STRINGS.RECIPE_DESC.POTATO_SOUP"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"encrypted-content",children:"Encrypted Content"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"File Encryption:"})," All listed files are encrypted klump assets"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cipher Dependency:"})," Files cannot be loaded without valid decryption keys"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Access Control:"})," Player profiles control which ciphers are available"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"content-distribution",children:"Content Distribution"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Secure Distribution:"})," Encrypted files can be distributed without exposing content"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Progressive Unlocking:"})," Content becomes available as players earn ciphers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Event-Based Access:"})," Ties content availability to festival participation"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"performance-impact",children:"Performance Impact"}),"\n",(0,l.jsx)(n.h3,{id:"loading-optimization",children:"Loading Optimization"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Batch Processing:"})," Enables efficient loading of multiple related files"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Conditional Loading:"})," Only attempts to load files with available ciphers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Progress Tracking:"})," Used with ",(0,l.jsx)(n.code,{children:"IsKlumpLoaded()"})," to prevent duplicate operations"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"memory-considerations",children:"Memory Considerations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Registry Size:"})," File list is kept minimal to reduce memory overhead"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"On-Demand Loading:"})," Files are loaded only when needed during events"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cleanup Potential:"})," Registry could support unloading unused content"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"debugging-and-development",children:"Debugging and Development"}),"\n",(0,l.jsx)(n.h3,{id:"empty-registry-state",children:"Empty Registry State"}),"\n",(0,l.jsxs)(n.p,{children:["The current empty state ",(0,l.jsx)(n.code,{children:"return {}"})," indicates:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No encrypted assets are currently registered"}),"\n",(0,l.jsx)(n.li,{children:"Development/testing environment without klump content"}),"\n",(0,l.jsx)(n.li,{children:"Possible build configuration excluding encrypted content"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"development-workflow",children:"Development Workflow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Check available klump files during development\nlocal files = require("klump_files")\nprint("Available klump files:", #files)\nfor i, file in ipairs(files) do\n    print(i, file)\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/klump",children:"klump"}),": Main encrypted file loading system"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/json",children:"json"}),": Used for parsing encrypted string data"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./events.md",children:"events"}),": Festival event system that triggers klump loading"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./playerprofile.md",children:"Profile"}),": Stores cipher keys for decryption"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"build-system-integration",children:"Build System Integration"}),"\n",(0,l.jsx)(n.h3,{id:"automated-generation",children:"Automated Generation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Script:"})," ",(0,l.jsx)(n.code,{children:"klump.py"})," generates this file automatically"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Timing:"})," Updated during build process before asset packaging"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dependencies:"})," Requires access to encrypted asset directories"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Output:"})," Overwrites existing klump_files.lua with current asset list"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"validation",children:"Validation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Asset Verification:"})," Build script validates that listed files exist"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Path Consistency:"})," Ensures all paths follow established conventions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cipher Compatibility:"})," Verifies that encryption keys are properly generated"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"future-considerations",children:"Future Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"potential-enhancements",children:"Potential Enhancements"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Categorization:"})," Group files by event or content type"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Metadata:"})," Include file size, version, or dependency information"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Validation:"})," Add checksums or integrity verification data"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"scalability",children:"Scalability"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Multiple Events:"})," Support for various festival events beyond Quagmire"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Version Management:"})," Handle multiple versions of encrypted content"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Selective Loading:"})," More granular control over which files to load"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>d});var s=i(96540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);