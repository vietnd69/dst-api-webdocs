"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[96070],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var a=s(96540);const l={},t=a.createContext(l);function r(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(t.Provider,{value:n},e.children)}},45769:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"game-scripts/core-systems/localization-content/translation/translator","title":"Translator","description":"Localization and translation system for managing multi-language support in Don\'t Starve Together","source":"@site/docs/game-scripts/core-systems/localization-content/translation/translator.md","sourceDirName":"game-scripts/core-systems/localization-content/translation","slug":"/game-scripts/core-systems/localization-content/translation/translator","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/translation/translator","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"translator","title":"Translator","description":"Localization and translation system for managing multi-language support in Don\'t Starve Together","sidebar_position":1,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Translation Overview","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/translation/"},"next":{"title":"Curse Monkey Util","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/translation/curse-monkey-util"}}');var l=s(74848),t=s(28453);const r={id:"translator",title:"Translator",description:"Localization and translation system for managing multi-language support in Don't Starve Together",sidebar_position:1,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},i="Translator",o={},c=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Class Definition",id:"class-definition",level:2},{value:"Translator()",id:"translator-constructor",level:3},{value:"Instance Methods",id:"instance-methods",level:2},{value:"UseLongestLocs(to)",id:"use-longest-locs",level:3},{value:"LoadPOFile(fname, lang)",id:"load-po-file",level:3},{value:"GetTranslatedString(strid, lang)",id:"get-translated-string",level:3},{value:"GetLongestTranslatedString(strid)",id:"get-longest-translated-string",level:3},{value:"ConvertEscapeCharactersToString(str)",id:"convert-escape-to-string",level:3},{value:"ConvertEscapeCharactersToRaw(str)",id:"convert-escape-to-raw",level:3},{value:"Global Functions",id:"global-functions",level:2},{value:"TranslateStringTable(tbl)",id:"translate-string-table",level:3},{value:"Global Instance",id:"global-instance",level:2},{value:"LanguageTranslator",id:"languagetranslator",level:3},{value:"PO File Format Support",id:"po-file-format-support",level:2},{value:"Legacy Format Detection",id:"legacy-format-detection",level:3},{value:"Modern Format Detection",id:"modern-format-detection",level:3},{value:"Multi-line String Support",id:"multi-line-string-support",level:3},{value:"Common Usage Patterns",id:"common-usage-patterns",level:2},{value:"Loading Multiple Languages",id:"loading-multiple-languages",level:3},{value:"Safe Translation with Fallback",id:"safe-translation-with-fallback",level:3},{value:"Dynamic Language Switching",id:"dynamic-language-switching",level:3},{value:"Testing UI Layout with Longest Strings",id:"testing-ui-layout-with-longest-strings",level:3},{value:"Integration Notes",id:"integration-notes",level:2},{value:"String Path Convention",id:"string-path-convention",level:3},{value:"Escape Character Handling",id:"escape-character-handling",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Related Modules",id:"related-modules",level:2},{value:"Source Reference",id:"source-reference",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"translator",children:"Translator"})}),"\n",(0,l.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Build Version"}),(0,l.jsx)(n.th,{children:"Change Date"}),(0,l.jsx)(n.th,{children:"Change Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"676042"}),(0,l.jsx)(n.td,{children:"2025-06-21"}),(0,l.jsx)(n.td,{children:"stable"}),(0,l.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"Translator"})," class provides the localization and translation system for Don't Starve Together. It manages loading and processing of PO (Portable Object) files for multiple languages, handles string translation lookups, and provides utilities for converting escape characters. The system supports both legacy and modern PO file formats with msgctxt support."]}),"\n",(0,l.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Access the global translator instance\nlocal translated = LanguageTranslator:GetTranslatedString("STRINGS.UI.MAINSCREEN.PLAY")\n\n-- Load a new language file\nLanguageTranslator:LoadPOFile("data/languages/french.po", "fr")\n\n-- Get translation in specific language\nlocal french_text = LanguageTranslator:GetTranslatedString("STRINGS.UI.MAINSCREEN.PLAY", "fr")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"class-definition",children:"Class Definition"}),"\n",(0,l.jsx)(n.h3,{id:"translator-constructor",children:"Translator()"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Creates a new Translator instance with empty language storage and configuration options."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Constructor Properties:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"languages"})," (table): Storage for loaded language translations"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"defaultlang"})," (string): Default language identifier"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"use_longest_locs"})," (boolean): Flag to use longest available translations"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local my_translator = Translator()\nmy_translator:LoadPOFile("custom_strings.po", "en")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"instance-methods",children:"Instance Methods"}),"\n",(0,l.jsx)(n.h3,{id:"use-longest-locs",children:"UseLongestLocs(to)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Configures the translator to use the longest available translation string when multiple languages provide translations for the same string ID."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"to"})," (boolean): Whether to enable longest localization mode"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"LanguageTranslator:UseLongestLocs(true)\n-- Now GetLongestTranslatedString() will be used for translations\n"})}),"\n",(0,l.jsx)(n.h3,{id:"load-po-file",children:"LoadPOFile(fname, lang)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Loads and parses a PO (Portable Object) translation file for the specified language. Supports both legacy format (using reference fields) and modern format (using msgctxt fields)."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"fname"})," (string): File path to the PO file to load"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"lang"})," (string): Language identifier to associate with the loaded translations"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"File Format Support:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Legacy Format"}),": Uses ",(0,l.jsx)(n.code,{children:"#:"})," reference fields for string IDs"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Modern Format"}),": Uses ",(0,l.jsx)(n.code,{children:"msgctxt"})," fields for string paths (POT Version 2.0)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Load French translations\nLanguageTranslator:LoadPOFile("data/languages/french.po", "fr")\n\n-- Load Chinese translations\nLanguageTranslator:LoadPOFile("data/languages/chinese_s.po", "zh")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"get-translated-string",children:"GetTranslatedString(strid, lang)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Retrieves the translated string for the given string ID in the specified language. Falls back to default language if no specific language is provided."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"strid"}),' (string): String identifier path (e.g., "STRINGS.UI.MAINSCREEN.PLAY")']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"lang"})," (string, optional): Language code to get translation for"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"(string|nil): Translated string if found, nil if no translation available"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Get translation in default language\nlocal play_text = LanguageTranslator:GetTranslatedString("STRINGS.UI.MAINSCREEN.PLAY")\n\n-- Get translation in specific language\nlocal french_play = LanguageTranslator:GetTranslatedString("STRINGS.UI.MAINSCREEN.PLAY", "fr")\n\nif french_play then\n    print("French translation:", french_play)\nelse\n    print("No French translation available")\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"get-longest-translated-string",children:"GetLongestTranslatedString(strid)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Searches all loaded languages for the given string ID and returns the longest available translation. Useful for UI layout testing and ensuring adequate space allocation."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"strid"})," (string): String identifier path to search for"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"(string|nil): Longest available translation or nil if no translations found"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Get the longest translation across all languages for UI sizing\nlocal longest_title = LanguageTranslator:GetLongestTranslatedString("STRINGS.UI.MAINSCREEN.TITLE")\n\n-- Use for UI element sizing calculations\nlocal button_width = math.max(200, string.len(longest_title) * 8)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"convert-escape-to-string",children:"ConvertEscapeCharactersToString(str)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Converts raw characters to escaped string format for PO file output. Transforms newlines, carriage returns, quotes, and backslashes to their escaped representations."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"str"})," (string): Raw string to convert"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"(string): String with escape sequences"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Conversions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"\\n"})," \u2192 ",(0,l.jsx)(n.code,{children:"\\\\n"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"\\r"})," \u2192 ",(0,l.jsx)(n.code,{children:"\\\\r"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"'})," \u2192 ",(0,l.jsx)(n.code,{children:'\\\\\\"'})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"\\\\"})," \u2192 ",(0,l.jsx)(n.code,{children:"\\\\\\\\"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local raw_text = "Hello\\nWorld \\"Quote\\""\nlocal escaped = LanguageTranslator:ConvertEscapeCharactersToString(raw_text)\nprint(escaped) -- "Hello\\\\nWorld \\\\\\"Quote\\\\\\""\n'})}),"\n",(0,l.jsx)(n.h3,{id:"convert-escape-to-raw",children:"ConvertEscapeCharactersToRaw(str)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Converts escaped string format back to raw characters for display. Reverses the escape character conversion process."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"str"})," (string): Escaped string to convert"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"(string): Raw string with actual characters"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Conversions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"\\\\n"})," \u2192 ",(0,l.jsx)(n.code,{children:"\\n"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"\\\\r"})," \u2192 ",(0,l.jsx)(n.code,{children:"\\r"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'\\\\\\"'})," \u2192 ",(0,l.jsx)(n.code,{children:'"'})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"\\\\\\\\"})," \u2192 ",(0,l.jsx)(n.code,{children:"\\\\"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local escaped_text = "Hello\\\\nWorld \\\\\\"Quote\\\\\\""\nlocal raw = LanguageTranslator:ConvertEscapeCharactersToRaw(escaped_text)\nprint(raw) -- "Hello\\nWorld \\"Quote\\""\n'})}),"\n",(0,l.jsx)(n.h2,{id:"global-functions",children:"Global Functions"}),"\n",(0,l.jsx)(n.h3,{id:"translate-string-table",children:"TranslateStringTable(tbl)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Recursively processes the STRINGS table structure and replaces string values with their translations using the global LanguageTranslator instance. Called automatically by the strings.lua system."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"tbl"})," (table): Table structure to translate (typically the STRINGS table)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Recursively traverses table hierarchy"}),"\n",(0,l.jsx)(n.li,{children:'Builds string paths like "STRINGS.UI.MAINSCREEN.PLAY"'}),"\n",(0,l.jsx)(n.li,{children:"Replaces values with translations when available"}),"\n",(0,l.jsxs)(n.li,{children:["Uses longest translations if ",(0,l.jsx)(n.code,{children:"use_longest_locs"})," is enabled"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- This is typically called automatically by the game\nSTRINGS = {\n    UI = {\n        MAINSCREEN = {\n            PLAY = "Play Game"\n        }\n    }\n}\n\nTranslateStringTable(STRINGS)\n-- STRINGS.UI.MAINSCREEN.PLAY now contains translated text if available\n'})}),"\n",(0,l.jsx)(n.h2,{id:"global-instance",children:"Global Instance"}),"\n",(0,l.jsx)(n.h3,{id:"languagetranslator",children:"LanguageTranslator"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Type:"})," ",(0,l.jsx)(n.code,{children:"Translator"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Status:"})," ",(0,l.jsx)(n.code,{children:"stable"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Description:"})," Global singleton instance of the Translator class used throughout the game for all localization operations."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Access global translator\nLanguageTranslator:LoadPOFile("my_mod_strings.po", "en")\nlocal translated = LanguageTranslator:GetTranslatedString("MOD.STRINGS.ITEM_NAME")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"po-file-format-support",children:"PO File Format Support"}),"\n",(0,l.jsx)(n.h3,{id:"legacy-format-detection",children:"Legacy Format Detection"}),"\n",(0,l.jsx)(n.p,{children:"The translator automatically detects legacy PO files and processes them using reference field parsing:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-po",children:'#: STRINGS.UI.MAINSCREEN.PLAY\nmsgid "Play Game"\nmsgstr "Jouer"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"modern-format-detection",children:"Modern Format Detection"}),"\n",(0,l.jsx)(n.p,{children:"Modern PO files are detected by version headers and use msgctxt fields:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-po",children:'# POT Version: 2.0\nmsgctxt "STRINGS.UI.MAINSCREEN.PLAY"\nmsgid "Play Game"\nmsgstr "Jouer"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"multi-line-string-support",children:"Multi-line String Support"}),"\n",(0,l.jsx)(n.p,{children:"Both formats support multi-line strings that are automatically joined:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-po",children:'msgctxt "STRINGS.LONG_TEXT"\nmsgid ""\n"This is a very long string "\n"that spans multiple lines"\nmsgstr ""\n"Ceci est une tr\xe8s longue cha\xeene "\n"qui s\'\xe9tend sur plusieurs lignes"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"common-usage-patterns",children:"Common Usage Patterns"}),"\n",(0,l.jsx)(n.h3,{id:"loading-multiple-languages",children:"Loading Multiple Languages"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local languages = {\n    {"french.po", "fr"},\n    {"chinese_s.po", "zh_CN"},\n    {"spanish.po", "es"},\n    {"german.po", "de"}\n}\n\nfor _, lang_data in ipairs(languages) do\n    LanguageTranslator:LoadPOFile("data/languages/" .. lang_data[1], lang_data[2])\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"safe-translation-with-fallback",children:"Safe Translation with Fallback"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function GetLocalizedString(string_id, fallback)\n    local translated = LanguageTranslator:GetTranslatedString(string_id)\n    return translated or fallback or string_id\nend\n\n-- Usage\nlocal button_text = GetLocalizedString("STRINGS.UI.BUTTONS.CONFIRM", "Confirm")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"dynamic-language-switching",children:"Dynamic Language Switching"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SwitchLanguage(lang_code, po_file_path)\n    LanguageTranslator:LoadPOFile(po_file_path, lang_code)\n    LanguageTranslator.defaultlang = lang_code\n    \n    -- Retranslate the STRINGS table\n    TranslateStringTable(STRINGS)\nend\n"})}),"\n",(0,l.jsx)(n.h3,{id:"testing-ui-layout-with-longest-strings",children:"Testing UI Layout with Longest Strings"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function TestUILayout()\n    LanguageTranslator:UseLongestLocs(true)\n    \n    -- Get longest possible strings for UI elements\n    local longest_title = LanguageTranslator:GetLongestTranslatedString("STRINGS.UI.TITLE")\n    local longest_button = LanguageTranslator:GetLongestTranslatedString("STRINGS.UI.BUTTON")\n    \n    -- Use for layout calculations\n    CalculateUILayout(longest_title, longest_button)\nend\n'})}),"\n",(0,l.jsx)(n.h2,{id:"integration-notes",children:"Integration Notes"}),"\n",(0,l.jsx)(n.h3,{id:"string-path-convention",children:"String Path Convention"}),"\n",(0,l.jsx)(n.p,{children:"String IDs follow a hierarchical dot notation that maps to table structure:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"STRINGS.UI.MAINSCREEN.PLAY"})," maps to ",(0,l.jsx)(n.code,{children:'STRINGS["UI"]["MAINSCREEN"]["PLAY"]'})]}),"\n",(0,l.jsx)(n.li,{children:"Paths are case-sensitive and must match exactly"}),"\n",(0,l.jsx)(n.li,{children:'Root level is always "STRINGS"'}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"escape-character-handling",children:"Escape Character Handling"}),"\n",(0,l.jsx)(n.p,{children:"The translator handles common escape sequences needed for PO file compatibility:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Newlines and carriage returns for multi-line text"}),"\n",(0,l.jsx)(n.li,{children:"Quote escaping for strings containing quotation marks"}),"\n",(0,l.jsx)(n.li,{children:"Backslash escaping for literal backslash characters"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Translations are cached in memory after loading"}),"\n",(0,l.jsx)(n.li,{children:"String lookups are O(1) hash table operations"}),"\n",(0,l.jsx)(n.li,{children:"Multi-line string joining is performed only during file loading"}),"\n",(0,l.jsx)(n.li,{children:"Consider loading only required languages to minimize memory usage"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./strings.md",children:"Strings"}),": Core string management and STRINGS table structure"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../languages/index.md",children:"Languages"}),": Language-specific PO files and localization data"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"./modutil.md",children:"Modding Utilities"}),": Utilities for mod localization integration"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"source-reference",children:"Source Reference"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"File Location:"})," ",(0,l.jsx)(n.code,{children:"scripts/translator.lua"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Dependencies:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"class.lua"}),": Class system foundation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"util.lua"}),": File resolution utilities"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Global Access:"})," Available globally as ",(0,l.jsx)(n.code,{children:"LanguageTranslator"})," instance"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);