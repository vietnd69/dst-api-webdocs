"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[8600],{28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>r});var t=n(96540);const i={},l=t.createContext(i);function c(e){const s=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(l.Provider,{value:s},e.children)}},40094:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"game-scripts/core-systems/fundamentals/core/metaclass","title":"MetaClass","description":"Advanced class creation system using userdata objects for enhanced garbage collection control","source":"@site/docs/game-scripts/core-systems/fundamentals/core/metaclass.md","sourceDirName":"game-scripts/core-systems/fundamentals/core","slug":"/game-scripts/core-systems/fundamentals/core/metaclass","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/fundamentals/core/metaclass","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"metaclass","title":"MetaClass","description":"Advanced class creation system using userdata objects for enhanced garbage collection control","sidebar_position":2,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"EntityScript Proxy System","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/fundamentals/core/entityscriptproxy"},"next":{"title":"Standard Components","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/fundamentals/core/standardcomponents"}}');var i=n(74848),l=n(28453);const c={id:"metaclass",title:"MetaClass",description:"Advanced class creation system using userdata objects for enhanced garbage collection control",sidebar_position:2,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},r="MetaClass",d={},a=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Functions",id:"functions",level:2},{value:"MetaClass(base, _ctor)",id:"metaclass-constructor",level:3},{value:"Built-in Methods",id:"built-in-methods",level:2},{value:"instance(klass)",id:"is-a-method",level:3},{value:"Metamethods",id:"metamethods",level:2},{value:"Object Access Metamethods",id:"object-access-metamethods",level:3},{value:"Lifecycle Metamethods",id:"lifecycle-metamethods",level:3},{value:"Arithmetic Metamethods",id:"arithmetic-metamethods",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Garbage Collection Protection",id:"garbage-collection-protection",level:3},{value:"Metamethod Resolution",id:"metamethod-resolution",level:3},{value:"Length Operator Protection",id:"length-operator-protection",level:3},{value:"Usage Guidelines",id:"usage-guidelines",level:2},{value:"When to Use MetaClass",id:"when-to-use-metaclass",level:3},{value:"Required Helper Functions",id:"required-helper-functions",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Custom Garbage Collection",id:"custom-garbage-collection",level:3},{value:"Custom Length Behavior",id:"custom-length-behavior",level:3},{value:"Related Modules",id:"related-modules",level:2},{value:"Technical Notes",id:"technical-notes",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"metaclass",children:"MetaClass"})}),"\n",(0,i.jsx)(s.h2,{id:"version-history",children:"Version History"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Build Version"}),(0,i.jsx)(s.th,{children:"Change Date"}),(0,i.jsx)(s.th,{children:"Change Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"676042"}),(0,i.jsx)(s.td,{children:"2025-06-21"}),(0,i.jsx)(s.td,{children:"stable"}),(0,i.jsx)(s.td,{children:"Current version"})]})})]}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"MetaClass"})," module provides an advanced class creation system that uses userdata objects instead of tables as the base for instances. This approach allows for enhanced control over garbage collection and enables replacement of metamethods like ",(0,i.jsx)(s.code,{children:"__gc"})," and ",(0,i.jsx)(s.code,{children:"__len"})," that are normally restricted when using tables."]}),"\n",(0,i.jsx)(s.p,{children:"The system is designed to solve garbage collection quirks where metatables could be collected before userdata, potentially causing crashes."}),"\n",(0,i.jsx)(s.h2,{id:"key-features",children:"Key Features"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Userdata-based Objects"}),": Uses ",(0,i.jsx)(s.code,{children:"newproxy(true)"})," to create userdata objects instead of tables"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Complete Metamethod Support"}),": Full support for all Lua metamethods including ",(0,i.jsx)(s.code,{children:"__gc"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Garbage Collection Safety"}),": Built-in protection against premature metatable collection"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Inheritance Support"}),": Supports class inheritance with ",(0,i.jsx)(s.code,{children:"is_a"})," method"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Constructor Flexibility"}),": Supports both base class extension and standalone constructors"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"functions",children:"Functions"}),"\n",(0,i.jsx)(s.h3,{id:"metaclass-constructor",children:"MetaClass(base, _ctor)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Status:"})," ",(0,i.jsx)(s.code,{children:"stable"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Description:"}),"\nCreates a new MetaClass definition. Like the standard ",(0,i.jsx)(s.code,{children:"Class"})," function but uses userdata objects as the base, allowing replacement of ",(0,i.jsx)(s.code,{children:"__gc"})," and ",(0,i.jsx)(s.code,{children:"__len"})," functions."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"base"})," (table|function): Either a base class to inherit from, or a constructor function if no inheritance is needed"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"_ctor"})," (function, optional): Constructor function when ",(0,i.jsx)(s.code,{children:"base"})," is a table"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"(table): The class definition that can be called to create instances"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-lua",children:'-- Create a simple MetaClass with constructor\nlocal MyClass = MetaClass(function(self, name)\n    self.name = name\n    self.created_time = GetTime()\nend)\n\n-- Create instance\nlocal instance = MyClass("TestObject")\nprint(instance.name) -- "TestObject"\n\n-- Create MetaClass with inheritance\nlocal BaseClass = MetaClass(function(self, value)\n    self.base_value = value\nend)\n\nlocal DerivedClass = MetaClass(BaseClass, function(self, value, extra)\n    BaseClass._ctor(self, value)\n    self.extra_data = extra\nend)\n\nlocal derived = DerivedClass(10, "additional")\nprint(derived.base_value) -- 10\nprint(derived.extra_data) -- "additional"\n'})}),"\n",(0,i.jsx)(s.h2,{id:"built-in-methods",children:"Built-in Methods"}),"\n",(0,i.jsxs)(s.h3,{id:"is-a-method",children:["instance",":is_a","(klass)"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Status:"})," ",(0,i.jsx)(s.code,{children:"stable"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Description:"}),"\nChecks if an instance is of a specific class or inherits from it. Traverses the inheritance chain to find matches."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"klass"})," (table): The class to check against"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["(boolean): ",(0,i.jsx)(s.code,{children:"true"})," if the instance is of the specified class or inherits from it"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-lua",children:"local BaseClass = MetaClass(function(self) end)\nlocal DerivedClass = MetaClass(BaseClass, function(self) end)\n\nlocal instance = DerivedClass()\nprint(instance:is_a(DerivedClass)) -- true\nprint(instance:is_a(BaseClass))    -- true\n"})}),"\n",(0,i.jsx)(s.h2,{id:"metamethods",children:"Metamethods"}),"\n",(0,i.jsxs)(s.p,{children:["The MetaClass system provides comprehensive metamethod support through internal ",(0,i.jsx)(s.code,{children:"metafunctions"}),":"]}),"\n",(0,i.jsx)(s.h3,{id:"object-access-metamethods",children:"Object Access Metamethods"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Metamethod"}),(0,i.jsx)(s.th,{children:"Description"}),(0,i.jsx)(s.th,{children:"Usage"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__index"})}),(0,i.jsx)(s.td,{children:"Property/method access"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"obj.property"})," or ",(0,i.jsx)(s.code,{children:"obj[key]"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__newindex"})}),(0,i.jsx)(s.td,{children:"Property assignment"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj.property = value"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__len"})}),(0,i.jsx)(s.td,{children:"Length operator"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"#obj"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__pairs"})}),(0,i.jsx)(s.td,{children:"Iteration with pairs"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"for k,v in pairs(obj)"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__ipairs"})}),(0,i.jsx)(s.td,{children:"Iteration with ipairs"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"for i,v in ipairs(obj)"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__next"})}),(0,i.jsx)(s.td,{children:"Next function override"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"next(obj, key)"})})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"lifecycle-metamethods",children:"Lifecycle Metamethods"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Metamethod"}),(0,i.jsx)(s.th,{children:"Description"}),(0,i.jsx)(s.th,{children:"Usage"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__gc"})}),(0,i.jsx)(s.td,{children:"Garbage collection"}),(0,i.jsx)(s.td,{children:"Automatic cleanup"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__eq"})}),(0,i.jsx)(s.td,{children:"Equality comparison"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj1 == obj2"})})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"arithmetic-metamethods",children:"Arithmetic Metamethods"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Metamethod"}),(0,i.jsx)(s.th,{children:"Description"}),(0,i.jsx)(s.th,{children:"Usage"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__add"})}),(0,i.jsx)(s.td,{children:"Addition"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj + other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__sub"})}),(0,i.jsx)(s.td,{children:"Subtraction"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj - other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__mul"})}),(0,i.jsx)(s.td,{children:"Multiplication"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj * other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__div"})}),(0,i.jsx)(s.td,{children:"Division"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj / other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__mod"})}),(0,i.jsx)(s.td,{children:"Modulo"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj % other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__pow"})}),(0,i.jsx)(s.td,{children:"Exponentiation"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj ^ other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__unm"})}),(0,i.jsx)(s.td,{children:"Unary minus"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"-obj"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__concat"})}),(0,i.jsx)(s.td,{children:"Concatenation"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj .. other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__call"})}),(0,i.jsx)(s.td,{children:"Function call"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj(args)"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__lt"})}),(0,i.jsx)(s.td,{children:"Less than"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj < other"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"__le"})}),(0,i.jsx)(s.td,{children:"Less than or equal"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"obj <= other"})})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,i.jsx)(s.h3,{id:"garbage-collection-protection",children:"Garbage Collection Protection"}),"\n",(0,i.jsx)(s.p,{children:"The module uses a weak reference table to prevent premature collection of metatables:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-lua",children:'local metatable_refs = setmetatable({}, {__mode = "k"})\n'})}),"\n",(0,i.jsx)(s.p,{children:"When creating instances, the metatable is stored in this weak table to ensure it remains accessible until the userdata is collected."}),"\n",(0,i.jsx)(s.h3,{id:"metamethod-resolution",children:"Metamethod Resolution"}),"\n",(0,i.jsxs)(s.p,{children:["Each metamethod first checks for custom implementations in the instance's metatable (",(0,i.jsx)(s.code,{children:"mt._"}),"), then falls back to the class definition (",(0,i.jsx)(s.code,{children:"mt.c"}),"). This allows both instance-specific and class-level metamethod customization."]}),"\n",(0,i.jsx)(s.h3,{id:"length-operator-protection",children:"Length Operator Protection"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"__len"})," metamethod includes recursion protection to prevent infinite loops:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-lua",children:"if __len and not mt._insidelen then\n    mt._insidelen = true\n    local result = __len(t)\n    mt._insidelen = false\n    return result\n"})}),"\n",(0,i.jsx)(s.h2,{id:"usage-guidelines",children:"Usage Guidelines"}),"\n",(0,i.jsx)(s.h3,{id:"when-to-use-metaclass",children:"When to Use MetaClass"}),"\n",(0,i.jsx)(s.p,{children:"Use MetaClass instead of regular Class when you need:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Custom garbage collection behavior (",(0,i.jsx)(s.code,{children:"__gc"})," metamethod)"]}),"\n",(0,i.jsx)(s.li,{children:"Precise control over object lifecycle"}),"\n",(0,i.jsxs)(s.li,{children:["Override length operator (",(0,i.jsx)(s.code,{children:"__len"}),") behavior"]}),"\n",(0,i.jsx)(s.li,{children:"Enhanced metamethod functionality"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"required-helper-functions",children:"Required Helper Functions"}),"\n",(0,i.jsx)(s.p,{children:"When working with MetaClass instances, use the meta* versions of standard functions:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"metapairs()"})," instead of ",(0,i.jsx)(s.code,{children:"pairs()"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"metanext()"})," instead of ",(0,i.jsx)(s.code,{children:"next()"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"metaipairs()"})," instead of ",(0,i.jsx)(s.code,{children:"ipairs()"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"metarawget()"})," instead of ",(0,i.jsx)(s.code,{children:"rawget()"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"metarawset()"})," instead of ",(0,i.jsx)(s.code,{children:"rawset()"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsx)(s.p,{children:"MetaClass instances have slightly more overhead than regular tables due to:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Userdata object creation"}),"\n",(0,i.jsx)(s.li,{children:"Metatable reference management"}),"\n",(0,i.jsx)(s.li,{children:"Metamethod resolution chain"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Use MetaClass only when the advanced features are necessary."}),"\n",(0,i.jsx)(s.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(s.h3,{id:"custom-garbage-collection",children:"Custom Garbage Collection"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-lua",children:"local ResourceClass = MetaClass(function(self, resource_id)\n    self.resource_id = resource_id\n    self._cleanup_needed = true\nend)\n\n-- Define custom cleanup\nResourceClass.__gc = function(self)\n    if self._cleanup_needed then\n        -- Custom cleanup logic\n        CleanupResource(self.resource_id)\n    end\nend\n"})}),"\n",(0,i.jsx)(s.h3,{id:"custom-length-behavior",children:"Custom Length Behavior"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-lua",children:"local ContainerClass = MetaClass(function(self)\n    self.items = {}\n    self.capacity = 10\nend)\n\nContainerClass.__len = function(self)\n    return #self.items\nend\n\nlocal container = ContainerClass()\nprint(#container) -- Uses custom __len\n"})}),"\n",(0,i.jsx)(s.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/fundamentals/core/class",children:"Class"}),": Standard table-based class system"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/fundamentals/core/entityscript",children:"EntityScript"}),": Uses MetaClass for entity objects"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"./componentutil.md",children:"ComponentUtil"}),": Component system utilities"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"technical-notes",children:"Technical Notes"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"MetaClass instances are userdata objects, not tables"}),"\n",(0,i.jsxs)(s.li,{children:["All data is stored in the metatable's ",(0,i.jsx)(s.code,{children:"_"})," field"]}),"\n",(0,i.jsxs)(s.li,{children:["Class definition is stored in the metatable's ",(0,i.jsx)(s.code,{children:"c"})," field"]}),"\n",(0,i.jsx)(s.li,{children:"Supports full inheritance chain traversal"}),"\n",(0,i.jsx)(s.li,{children:"Thread-safe for read operations"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);