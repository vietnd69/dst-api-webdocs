"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[18762],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(96540);const d={},l=i.createContext(d);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},69004:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"game-scripts/core-systems/data-management/assets/preloadsounds","title":"Preload Sounds","description":"Sound file preloading system for optimized audio performance in DST","source":"@site/docs/game-scripts/core-systems/data-management/assets/preloadsounds.md","sourceDirName":"game-scripts/core-systems/data-management/assets","slug":"/game-scripts/core-systems/data-management/assets/preloadsounds","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/preloadsounds","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"preloadsounds","title":"Preload Sounds","description":"Sound file preloading system for optimized audio performance in DST","sidebar_position":5,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Mixes","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/assets/mixes"},"next":{"title":"Saves Overview","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/data-management/saves/"}}');var d=s(74848),l=s(28453);const r={id:"preloadsounds",title:"Preload Sounds",description:"Sound file preloading system for optimized audio performance in DST",sidebar_position:5,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},o="Preload Sounds",a={},t=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Sound Lists",id:"sound-lists",level:2},{value:"DLCSounds",id:"dlcsounds",level:3},{value:"MainSounds",id:"mainsounds",level:3},{value:"Functions",id:"functions",level:2},{value:"PreloadSoundList(list)",id:"preload-sound-list",level:3},{value:"PreloadSounds()",id:"preload-sounds",level:3},{value:"Sound File Organization",id:"sound-file-organization",level:2},{value:"File Types",id:"file-types",level:3},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Special Event Music Handling",id:"special-event-music-handling",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Required Modules",id:"required-modules",level:3},{value:"External References",id:"external-references",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Preloading Benefits",id:"preloading-benefits",level:3},{value:"Memory Usage",id:"memory-usage",level:3},{value:"Usage Patterns",id:"usage-patterns",level:2},{value:"Game Initialization",id:"game-initialization",level:3},{value:"Mod Integration",id:"mod-integration",level:3},{value:"Conditional Loading",id:"conditional-loading",level:3},{value:"Related Modules",id:"related-modules",level:2},{value:"Notes",id:"notes",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"preload-sounds",children:"Preload Sounds"})}),"\n",(0,d.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Build Version"}),(0,d.jsx)(n.th,{children:"Change Date"}),(0,d.jsx)(n.th,{children:"Change Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"676042"}),(0,d.jsx)(n.td,{children:"2025-06-21"}),(0,d.jsx)(n.td,{children:"stable"}),(0,d.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,d.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"preloadsounds.lua"})," module manages the preloading of sound files for Don't Starve Together. It defines comprehensive sound file lists and provides functions to efficiently preload audio assets, reducing loading times during gameplay and ensuring smooth audio playback."]}),"\n",(0,d.jsx)(n.h2,{id:"sound-lists",children:"Sound Lists"}),"\n",(0,d.jsx)(n.h3,{id:"dlcsounds",children:"DLCSounds"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Type:"})," ",(0,d.jsx)(n.code,{children:"table"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Status:"})," ",(0,d.jsx)(n.code,{children:"stable"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Description:"})," Array of DLC-specific sound files that are loaded when Reign of Giants DLC is installed."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Contents:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:'{\n    "amb_stream.fsb",\n    "bearger.fsb",\n    "buzzard.fsb",\n    "catcoon.fsb",\n    "deciduous.fsb",\n    "DLC_music.fsb",\n    "dontstarve_DLC001.fev",\n    "dragonfly.fsb",\n    "glommer.fsb",\n    "goosemoose.fsb",\n    "lightninggoat.fsb",\n    "mole.fsb",\n    "stuff.fsb",\n    "vargr.fsb",\n    "wathgrithr.fsb",\n    "webber.fsb"\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"mainsounds",children:"MainSounds"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Type:"})," ",(0,d.jsx)(n.code,{children:"table"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Status:"})," ",(0,d.jsx)(n.code,{children:"stable"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Description:"})," Array of core sound files that are always loaded in the base game, including character sounds, creature sounds, ambient audio, and event-specific music."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Key Categories:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Character Sounds:"})," Individual character voice files (wilson.fsb, willow.fsb, etc.)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Creature Sounds:"})," Animal and monster audio (beefalo.fsb, spider.fsb, etc.)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Ambient Audio:"})," Environmental sounds (forest.fsb, cave_AMB.fsb, etc.)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Event Music:"})," Seasonal and special event audio files"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Core Systems:"})," Basic game audio (common.fsb, sfx.fsb, music.fsb)"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,d.jsx)(n.h3,{id:"preload-sound-list",children:"PreloadSoundList(list)"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Status:"})," ",(0,d.jsx)(n.code,{children:"stable"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Description:"}),"\nPreloads all sound files specified in the provided list by calling TheSim",":PreloadFile",'() for each file with the "sound/" path prefix.']}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"list"})," (table): Array of sound file names to preload"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"(void): No return value"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:'local custom_sounds = {"custom_music.fsb", "custom_sfx.fsb"}\nPreloadSoundList(custom_sounds)\n'})}),"\n",(0,d.jsx)(n.h3,{id:"preload-sounds",children:"PreloadSounds()"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Status:"})," ",(0,d.jsx)(n.code,{children:"stable"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Description:"}),"\nMain function that orchestrates the preloading of all sound files. Conditionally loads DLC sounds if Reign of Giants is installed, loads all main sounds, and handles special event music selection based on current world settings."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"None"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"(void): No return value"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Logic Flow:"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Checks if Reign of Giants DLC is installed via ",(0,d.jsx)(n.code,{children:"IsDLCInstalled(REIGN_OF_GIANTS)"})]}),"\n",(0,d.jsx)(n.li,{children:"If DLC is present, preloads DLC sound list"}),"\n",(0,d.jsx)(n.li,{children:"Always preloads main sound list"}),"\n",(0,d.jsxs)(n.li,{children:["Dynamically selects and preloads special event music based on:","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"WORLD_FESTIVAL_EVENT"})," setting"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"WORLD_SPECIAL_EVENT"})," setting"]}),"\n",(0,d.jsx)(n.li,{children:'Falls back to "music_frontend.fsb" if no special events'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:"-- Called during game initialization\nPreloadSounds()\n"})}),"\n",(0,d.jsx)(n.h2,{id:"sound-file-organization",children:"Sound File Organization"}),"\n",(0,d.jsx)(n.h3,{id:"file-types",children:"File Types"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Extension"}),(0,d.jsx)(n.th,{children:"Purpose"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:".fsb"})}),(0,d.jsx)(n.td,{children:"FMOD Sound Bank"}),(0,d.jsx)(n.td,{children:"Compressed audio container with multiple sounds"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:".fev"})}),(0,d.jsx)(n.td,{children:"FMOD Event File"}),(0,d.jsx)(n.td,{children:"Audio event definitions and parameters"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Character Files:"})," ",(0,d.jsx)(n.code,{children:"[character_name].fsb"})," (e.g., wilson.fsb, willow.fsb)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Creature Files:"})," ",(0,d.jsx)(n.code,{children:"[creature_name].fsb"})," (e.g., spider.fsb, beefalo.fsb)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Event Files:"})," ",(0,d.jsx)(n.code,{children:"[event_name].fev"})," and ",(0,d.jsx)(n.code,{children:"[event_name].fsb"})," pairs"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"System Files:"})," Descriptive names (common.fsb, sfx.fsb, music.fsb)"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"special-event-music-handling",children:"Special Event Music Handling"}),"\n",(0,d.jsx)(n.p,{children:"The system dynamically loads event-specific music based on world configuration:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:'PreloadSoundList({\n    (FESTIVAL_EVENT_MUSIC[WORLD_FESTIVAL_EVENT] ~= nil and \n     FESTIVAL_EVENT_MUSIC[WORLD_FESTIVAL_EVENT].bank) or\n    (SPECIAL_EVENT_MUSIC[WORLD_SPECIAL_EVENT] ~= nil and \n     SPECIAL_EVENT_MUSIC[WORLD_SPECIAL_EVENT].bank) or\n    "music_frontend.fsb",\n})\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Priority Order:"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Festival event music (if active festival)"}),"\n",(0,d.jsx)(n.li,{children:"Special event music (if active special event)"}),"\n",(0,d.jsx)(n.li,{children:"Default frontend music (fallback)"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,d.jsx)(n.h3,{id:"required-modules",children:"Required Modules"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./dlcsupport.md",children:(0,d.jsx)(n.code,{children:"dlcsupport"})}),": DLC detection and compatibility functions"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"external-references",children:"External References"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"TheSim:PreloadFile()"}),": Engine function for file preloading"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"IsDLCInstalled()"}),": DLC detection function"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"FESTIVAL_EVENT_MUSIC"}),": Festival music configuration constant"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"SPECIAL_EVENT_MUSIC"}),": Special event music configuration constant"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"WORLD_FESTIVAL_EVENT"}),": Current world festival setting"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"WORLD_SPECIAL_EVENT"}),": Current world special event setting"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,d.jsx)(n.h3,{id:"preloading-benefits",children:"Preloading Benefits"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Reduced Loading Times:"})," Files are cached in memory before needed"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Smooth Audio Transitions:"})," No delays when switching between sounds"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Improved User Experience:"})," Eliminates audio stuttering during gameplay"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"memory-usage",children:"Memory Usage"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Sound files are loaded into memory during initialization"}),"\n",(0,d.jsx)(n.li,{children:"DLC sounds only loaded when relevant DLC is installed"}),"\n",(0,d.jsx)(n.li,{children:"Event-specific music loaded dynamically based on world settings"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"usage-patterns",children:"Usage Patterns"}),"\n",(0,d.jsx)(n.h3,{id:"game-initialization",children:"Game Initialization"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:"-- Called during game startup\nPreloadSounds()\n"})}),"\n",(0,d.jsx)(n.h3,{id:"mod-integration",children:"Mod Integration"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:'-- Mods can extend preloading for custom sounds\nlocal mod_sounds = {"mod_character.fsb", "mod_creatures.fsb"}\nPreloadSoundList(mod_sounds)\n'})}),"\n",(0,d.jsx)(n.h3,{id:"conditional-loading",children:"Conditional Loading"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lua",children:'-- Example of conditional sound loading\nif some_condition then\n    PreloadSoundList({"conditional_sounds.fsb"})\nend\n'})}),"\n",(0,d.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./constants.md",children:(0,d.jsx)(n.code,{children:"constants"})}),": Contains event music configuration tables"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./dlcsupport.md",children:(0,d.jsx)(n.code,{children:"dlcsupport"})}),": DLC detection and compatibility functions"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./main.md",children:(0,d.jsx)(n.code,{children:"main"})}),": Game initialization system that calls PreloadSounds()"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["The module is loaded before ",(0,d.jsx)(n.code,{children:"constants.lua"}),", so event music constants are only accessed within function calls"]}),"\n",(0,d.jsxs)(n.li,{children:["Special event music configuration is defined in ",(0,d.jsx)(n.code,{children:"constants.lua"})," but accessed dynamically"]}),"\n",(0,d.jsx)(n.li,{children:'All sound files are loaded from the "sound/" directory path'}),"\n",(0,d.jsx)(n.li,{children:"The system gracefully handles missing DLC by conditional loading"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}}}]);