"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[16141],{75:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"game-scripts/core-systems/game-configuration/stats/stats","title":"Stats","description":"Statistics and metrics collection system for tracking game events and performance data","source":"@site/docs/game-scripts/core-systems/game-configuration/stats/stats.md","sourceDirName":"game-scripts/core-systems/game-configuration/stats","slug":"/game-scripts/core-systems/game-configuration/stats/stats","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/game-configuration/stats/stats","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"stats","title":"Stats","description":"Statistics and metrics collection system for tracking game events and performance data","slug":"/game-scripts/core-systems/game-configuration/stats/stats","sidebar_position":1,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Item Blacklist","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/game-configuration/stats/item-blacklist"},"next":{"title":"Localization Content Overview","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/"}}');var t=n(74848),r=n(28453);const l={id:"stats",title:"Stats",description:"Statistics and metrics collection system for tracking game events and performance data",slug:"/game-scripts/core-systems/game-configuration/stats/stats",sidebar_position:1,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},a="Stats",d={},c=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Core Functionality",id:"core-functionality",level:2},{value:"Statistics Categories",id:"statistics-categories",level:3},{value:"Data Collection Flow",id:"data-collection-flow",level:3},{value:"Global Variables",id:"global-variables",level:2},{value:"STATS_ENABLE",id:"stats_enable",level:3},{value:"ProfileStats",id:"profilestats",level:3},{value:"TrackingEventsStats",id:"trackingeventsstats",level:3},{value:"TrackingTimingStats",id:"trackingtimingstats",level:3},{value:"Core Functions",id:"core-functions",level:2},{value:"ProfileStatsAdd(item, value)",id:"profilestatsadd",level:3},{value:"ProfileStatsSet(item, value)",id:"profilestatsset",level:3},{value:"ProfileStatsGet(item)",id:"profilestatsget",level:3},{value:"ProfileStatsAddItemChunk(item, chunk)",id:"profilestatsadditemchunk",level:3},{value:"ProfileStatsAddToField(field, value)",id:"profilestatsaddtofield",level:3},{value:"ProfileStatsSetField(field, value)",id:"profilestatssetfield",level:3},{value:"ProfileStatsAppendToField(field, value)",id:"profilestatsappendtofield",level:3},{value:"Advanced Functions",id:"advanced-functions",level:2},{value:"PushMetricsEvent(event_id, player, values, is_only_local_users_data)",id:"pushmetricsevent",level:3},{value:"BuildContextTable(player)",id:"buildcontexttable",level:3},{value:"Super User Functions",id:"super-user-functions",level:2},{value:"SuUsed(item, value)",id:"suused",level:3},{value:"SuUsedAdd(item, value)",id:"suusedadd",level:3},{value:"SetSuper(value)",id:"setsuper",level:3},{value:"WasSuUsed()",id:"wassuused",level:3},{value:"Utility Functions",id:"utility-functions",level:2},{value:"GetClientMetricsData()",id:"getclientmetricsdata",level:3},{value:"PrefabListToMetrics(list)",id:"prefablisttometrics",level:3},{value:"Session Management",id:"session-management",level:2},{value:"RecordSessionStartStats()",id:"recordsessionstartstats",level:3},{value:"RecordGameStartStats()",id:"recordgamestartstats",level:3},{value:"ClearProfileStats()",id:"clearprofilestats",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Statistics Control",id:"statistics-control",level:3},{value:"Data Privacy",id:"data-privacy",level:3},{value:"Integration Points",id:"integration-points",level:2},{value:"Automatic Tracking",id:"automatic-tracking",level:3},{value:"Manual Integration",id:"manual-integration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Data Organization",id:"data-organization",level:3},{value:"Privacy Compliance",id:"privacy-compliance",level:3},{value:"Common Usage Patterns",id:"common-usage-patterns",level:2},{value:"Basic Event Tracking",id:"basic-event-tracking",level:3},{value:"Categorized Statistics",id:"categorized-statistics",level:3},{value:"Performance Metrics",id:"performance-metrics",level:3},{value:"Custom Events",id:"custom-events",level:3},{value:"Related Modules",id:"related-modules",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"stats",children:"Stats"})}),"\n",(0,t.jsx)(s.h2,{id:"version-history",children:"Version History"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Build Version"}),(0,t.jsx)(s.th,{children:"Change Date"}),(0,t.jsx)(s.th,{children:"Change Type"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"676042"}),(0,t.jsx)(s.td,{children:"2025-06-21"}),(0,t.jsx)(s.td,{children:"stable"}),(0,t.jsx)(s.td,{children:"Current version"})]})})]}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"Stats"})," module provides a comprehensive system for collecting, organizing, and transmitting game statistics and metrics data in Don't Starve Together. It handles event tracking, timing measurements, profile statistics, session data, and automated metrics reporting to servers for analytics purposes."]}),"\n",(0,t.jsx)(s.p,{children:"The system is designed to capture both user-facing gameplay statistics and internal performance metrics while respecting privacy settings and enabling/disabling based on configuration."}),"\n",(0,t.jsx)(s.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Track a simple event\nProfileStatsAdd("items_collected", 1)\n\n-- Track an event with specific value\nProfileStatsAdd("damage_dealt", 25)\n\n-- Set a specific stat value\nProfileStatsSet("current_level", 10)\n\n-- Track nested statistics\nProfileStatsAddToField("combat.weapons.spear", 1)\n\n-- Send custom metrics event\nPushMetricsEvent("player_death", ThePlayer, {\n    cause = "monster",\n    location = "forest"\n})\n\n-- Check if super user commands were used\nif WasSuUsed() then\n    print("Debug commands were used this session")\nend\n'})}),"\n",(0,t.jsx)(s.h2,{id:"core-functionality",children:"Core Functionality"}),"\n",(0,t.jsx)(s.h3,{id:"statistics-categories",children:"Statistics Categories"}),"\n",(0,t.jsx)(s.p,{children:"The stats system handles several categories of data:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Profile Stats"}),": Persistent player statistics across sessions"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Tracking Events"}),": Discrete event occurrences during gameplay"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Timing Stats"}),": Performance and duration measurements"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Game Stats"}),": Session-specific gameplay data"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Main Menu Stats"}),": Frontend usage statistics"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"data-collection-flow",children:"Data Collection Flow"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Event Recording"}),": Game events are captured via various ",(0,t.jsx)(s.code,{children:"ProfileStats*"})," functions"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Context Building"}),": Player and session context is automatically added"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Data Aggregation"}),": Statistics are accumulated and organized"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Transmission"}),": Data is periodically sent to analytics servers"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Privacy Handling"}),": User data is anonymized or filtered based on settings"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"global-variables",children:"Global Variables"}),"\n",(0,t.jsx)(s.h3,{id:"stats_enable",children:"STATS_ENABLE"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Type:"})," ",(0,t.jsx)(s.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nGlobal flag that enables or disables the entire statistics system. Based on ",(0,t.jsx)(s.code,{children:"METRICS_ENABLED"})," setting."]}),"\n",(0,t.jsx)(s.h3,{id:"profilestats",children:"ProfileStats"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Type:"})," ",(0,t.jsx)(s.code,{children:"table"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nGlobal table containing accumulated profile statistics for the current session."]}),"\n",(0,t.jsx)(s.h3,{id:"trackingeventsstats",children:"TrackingEventsStats"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Type:"})," ",(0,t.jsx)(s.code,{children:"table"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nGlobal table tracking discrete events that occurred during gameplay."]}),"\n",(0,t.jsx)(s.h3,{id:"trackingtimingstats",children:"TrackingTimingStats"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Type:"})," ",(0,t.jsx)(s.code,{children:"table"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nGlobal table containing timing and performance measurements."]}),"\n",(0,t.jsx)(s.h2,{id:"core-functions",children:"Core Functions"}),"\n",(0,t.jsx)(s.h3,{id:"profilestatsadd",children:"ProfileStatsAdd(item, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nAdds a value to a profile statistic, creating the statistic if it doesn't exist."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"item"})," (string): Name of the statistic to increment"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (number): Value to add (defaults to 1 if nil)"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Increment by 1\nProfileStatsAdd("monsters_killed")\n\n-- Increment by specific amount\nProfileStatsAdd("experience_gained", 150)\n'})}),"\n",(0,t.jsx)(s.h3,{id:"profilestatsset",children:"ProfileStatsSet(item, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nSets a profile statistic to a specific value, overwriting any existing value."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"item"})," (string): Name of the statistic to set"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (any): Value to assign to the statistic"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'ProfileStatsSet("current_day", 25)\nProfileStatsSet("favorite_character", "wilson")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"profilestatsget",children:"ProfileStatsGet(item)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nRetrieves the current value of a profile statistic."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"item"})," (string): Name of the statistic to retrieve"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"(any): Current value of the statistic, or nil if not set"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'local current_day = ProfileStatsGet("current_day")\nif current_day and current_day > 100 then\n    -- Player has survived over 100 days\nend\n'})}),"\n",(0,t.jsx)(s.h3,{id:"profilestatsadditemchunk",children:"ProfileStatsAddItemChunk(item, chunk)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nAdds a chunk-based statistic, useful for categorizing items or events into groups."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"item"})," (string): Main category name"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"chunk"})," (string): Subcategory or chunk name"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Track items by type\nProfileStatsAddItemChunk("items_crafted", "tools")\nProfileStatsAddItemChunk("items_crafted", "weapons")\n\n-- Results in ProfileStats["items_crafted"]["tools"] = 1\n--                ProfileStats["items_crafted"]["weapons"] = 1\n'})}),"\n",(0,t.jsx)(s.h3,{id:"profilestatsaddtofield",children:"ProfileStatsAddToField(field, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nAdds a value to a nested field using dot notation, creating intermediate tables as needed."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"field"}),' (string): Dot-separated field path (e.g., "combat.weapons.spear")']}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (number): Value to add (defaults to 1 if nil)"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Create nested statistics\nProfileStatsAddToField("survival.food.berries", 5)\nProfileStatsAddToField("survival.food.meat", 3)\nProfileStatsAddToField("combat.damage.dealt", 100)\n\n-- Results in nested table structure:\n-- ProfileStats.survival.food.berries = 5\n-- ProfileStats.survival.food.meat = 3\n-- ProfileStats.combat.damage.dealt = 100\n'})}),"\n",(0,t.jsx)(s.h3,{id:"profilestatssetfield",children:"ProfileStatsSetField(field, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nSets a nested field to a specific value using dot notation."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"field"})," (string): Dot-separated field path"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (any): Value to assign"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"(any): The assigned value, or nil if field parameter is invalid"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'ProfileStatsSetField("player.status.health", 100)\nProfileStatsSetField("world.settings.difficulty", "survival")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"profilestatsappendtofield",children:"ProfileStatsAppendToField(field, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nAppends a value to an array field, creating the array if it doesn't exist."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"field"})," (string): Dot-separated field path"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (any): Value to append to the array"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Build a list of achievements\nProfileStatsAppendToField("achievements.unlocked", "first_winter")\nProfileStatsAppendToField("achievements.unlocked", "monster_slayer")\n\n-- Results in ProfileStats.achievements.unlocked = {"first_winter", "monster_slayer"}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"advanced-functions",children:"Advanced Functions"}),"\n",(0,t.jsx)(s.h3,{id:"pushmetricsevent",children:"PushMetricsEvent(event_id, player, values, is_only_local_users_data)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nSends a custom metrics event with player context and additional data to the analytics system."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"event_id"})," (string): Identifier for the type of event"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"player"})," (Entity|string): Player entity or user ID"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"values"})," (table): Optional additional data to include"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"is_only_local_users_data"})," (boolean): Whether to restrict to local user data only"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Track player death with context\nPushMetricsEvent("player_death", ThePlayer, {\n    cause = "starving",\n    day = TheWorld.state.cycles,\n    location = TheWorld.Map:GetTileAtPoint(ThePlayer.Transform:GetWorldPosition())\n})\n\n-- Track world generation completion\nPushMetricsEvent("world_generated", TheNet:GetUserID(), {\n    world_size = "default",\n    generation_time = 45.2\n})\n'})}),"\n",(0,t.jsx)(s.h3,{id:"buildcontexttable",children:"BuildContextTable(player)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nConstructs a standardized context table with player, session, and world information for metrics."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"player"})," (Entity|string): Player entity or user ID"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"(table): Context table with standardized fields"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:"local context = BuildContextTable(ThePlayer)\n-- Contains: user, build, install_id, session_id, save_id, world_time, etc.\n"})}),"\n",(0,t.jsx)(s.h2,{id:"super-user-functions",children:"Super User Functions"}),"\n",(0,t.jsx)(s.h3,{id:"suused",children:"SuUsed(item, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nRecords that a super user (debug) command was used and logs the statistic."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"item"})," (string): Name of the debug command or action"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (any): Associated value or parameter"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Called automatically when debug commands are used\nSuUsed("god_mode_enabled", true)\nSuUsed("items_spawned", "beefalo")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"suusedadd",children:"SuUsedAdd(item, value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nAdds to a super user statistic, marking the session as having used debug commands."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"item"})," (string): Name of the statistic"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (number): Value to add"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"setsuper",children:"SetSuper(value)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nExplicitly sets the super user flag for the current session."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"value"})," (boolean): Whether super user mode is active"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"wassuused",children:"WasSuUsed()"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nChecks if any super user commands were used during the current session."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"(boolean): True if super user commands were used"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'if WasSuUsed() then\n    -- Disable achievements or mark save as debug\n    print("Debug commands used - achievements disabled")\nend\n'})}),"\n",(0,t.jsx)(s.h2,{id:"utility-functions",children:"Utility Functions"}),"\n",(0,t.jsx)(s.h3,{id:"getclientmetricsdata",children:"GetClientMetricsData()"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nRetrieves client-side metrics data including play instance and install ID."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"(table): Client metrics data, or nil if Profile is unavailable"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"prefablisttometrics",children:"PrefabListToMetrics(list)"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nConverts a list of prefab entities into a metrics-friendly format with counts."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"list"})," (table): Array of entity objects with prefab names"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["(table): Array of ",(0,t.jsx)(s.code,{children:"{prefab, count}"})," pairs"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'local inventory_items = ThePlayer.components.inventory:GetItems()\nlocal metrics = PrefabListToMetrics(inventory_items)\n-- Returns: {{prefab="log", count=20}, {prefab="rocks", count=15}, ...}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-management",children:"Session Management"}),"\n",(0,t.jsx)(s.h3,{id:"recordsessionstartstats",children:"RecordSessionStartStats()"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nRecords statistics when a new game session begins, including mod information and startup context."]}),"\n",(0,t.jsx)(s.h3,{id:"recordgamestartstats",children:"RecordGameStartStats()"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nRecords statistics when the game application starts, including platform and permission information."]}),"\n",(0,t.jsx)(s.h3,{id:"clearprofilestats",children:"ClearProfileStats()"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status:"})," ",(0,t.jsx)(s.code,{children:"stable"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nClears all accumulated profile statistics, typically called when starting a new session."]}),"\n",(0,t.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(s.h3,{id:"statistics-control",children:"Statistics Control"}),"\n",(0,t.jsx)(s.p,{children:"The stats system respects several configuration options:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"STATS_ENABLE"}),": Master enable/disable flag"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"METRICS_ENABLED"}),": Base configuration for metrics collection"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Privacy Settings"}),": User privacy preferences affect data collection"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"data-privacy",children:"Data Privacy"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"User IDs are anonymized in production builds"}),"\n",(0,t.jsx)(s.li,{children:"Local-only data can be flagged to prevent transmission"}),"\n",(0,t.jsx)(s.li,{children:"Debug builds may include additional user identification"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"integration-points",children:"Integration Points"}),"\n",(0,t.jsx)(s.h3,{id:"automatic-tracking",children:"Automatic Tracking"}),"\n",(0,t.jsx)(s.p,{children:"The stats system automatically tracks:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Session start/stop events"}),"\n",(0,t.jsx)(s.li,{children:"Game launch completion"}),"\n",(0,t.jsx)(s.li,{children:"Network connection success"}),"\n",(0,t.jsx)(s.li,{children:"Mod usage during sessions"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"manual-integration",children:"Manual Integration"}),"\n",(0,t.jsx)(s.p,{children:"Game systems can integrate by calling:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"ProfileStatsAdd()"})," for incremental statistics"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"PushMetricsEvent()"})," for significant events"]}),"\n",(0,t.jsx)(s.li,{children:"Super user functions when debug features are used"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(s.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Statistics are accumulated in memory and sent in batches"}),"\n",(0,t.jsx)(s.li,{children:"Avoid excessive granular tracking that could impact performance"}),"\n",(0,t.jsx)(s.li,{children:"Use timing stats judiciously for critical performance metrics"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"data-organization",children:"Data Organization"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Use hierarchical field names for related statistics"}),"\n",(0,t.jsx)(s.li,{children:"Group similar events under common categories"}),"\n",(0,t.jsx)(s.li,{children:"Maintain consistent naming conventions across the codebase"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"privacy-compliance",children:"Privacy Compliance"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Always check ",(0,t.jsx)(s.code,{children:"STATS_ENABLE"})," before collecting data"]}),"\n",(0,t.jsx)(s.li,{children:"Use appropriate privacy flags when sending sensitive data"}),"\n",(0,t.jsx)(s.li,{children:"Respect user preferences for data collection"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"common-usage-patterns",children:"Common Usage Patterns"}),"\n",(0,t.jsx)(s.h3,{id:"basic-event-tracking",children:"Basic Event Tracking"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Simple counters\nProfileStatsAdd("trees_chopped")\nProfileStatsAdd("rocks_mined")\nProfileStatsAdd("monsters_killed")\n'})}),"\n",(0,t.jsx)(s.h3,{id:"categorized-statistics",children:"Categorized Statistics"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Group related stats\nProfileStatsAddToField("crafting.tools.axe", 1)\nProfileStatsAddToField("crafting.tools.pickaxe", 1)\nProfileStatsAddToField("crafting.food.jerky", 5)\n'})}),"\n",(0,t.jsx)(s.h3,{id:"performance-metrics",children:"Performance Metrics"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Track timing data (usually done internally)\nlocal start_time = GetTime()\n-- ... perform operation ...\nlocal duration = GetTime() - start_time\nProfileStatsAddToField("performance.world_gen_time", duration)\n'})}),"\n",(0,t.jsx)(s.h3,{id:"custom-events",children:"Custom Events"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-lua",children:'-- Significant gameplay events\nPushMetricsEvent("boss_defeated", ThePlayer, {\n    boss_type = "deerclops",\n    player_level = 25,\n    time_to_defeat = 120.5\n})\n'})}),"\n",(0,t.jsx)(s.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./profile.md",children:"Profile"}),": Player profile and persistence system"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./netvars.md",children:"NetVar"}),": Network variable system for multiplayer stats"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./mods.md",children:"ModManager"}),": Mod system integration for tracking mod usage"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./config.md",children:"Config"}),": Configuration system for stats preferences"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var i=n(96540);const t={},r=i.createContext(t);function l(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);