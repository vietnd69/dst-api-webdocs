"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[76964],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var i=s(96540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},42218:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"game-scripts/core-systems/localization-content/content/play-commonfn","title":"Play Common Functions","description":"Common utility functions for the stage play system in Don\'t Starve Together","source":"@site/docs/game-scripts/core-systems/localization-content/content/play_commonfn.md","sourceDirName":"game-scripts/core-systems/localization-content/content","slug":"/game-scripts/core-systems/localization-content/content/play-commonfn","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-commonfn","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"play-commonfn","title":"Play Common Functions","description":"Common utility functions for the stage play system in Don\'t Starve Together","sidebar_position":6,"last_updated":"2025-06-21T00:00:00.000Z","build_version":676042,"change_status":"stable"},"sidebar":"docs","previous":{"title":"Note Table - DST Main Theme","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/notetable-dsmaintheme"},"next":{"title":"Play General Scripts","permalink":"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-generalscripts"}}');var t=s(74848),l=s(28453);const r={id:"play-commonfn",title:"Play Common Functions",description:"Common utility functions for the stage play system in Don't Starve Together",sidebar_position:6,last_updated:new Date("2025-06-21T00:00:00.000Z"),build_version:676042,change_status:"stable"},c="Play Common Functions",a={},d=[{value:"Version History",id:"version-history",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Functions",id:"functions",level:2},{value:"callbirds(inst, line, cast)",id:"callbirds",level:3},{value:"exitbirds(inst, line, cast)",id:"exitbirds",level:3},{value:"actorscurtsey(inst, line, cast)",id:"actorscurtsey",level:3},{value:"actorsbow(inst, line, cast)",id:"actorsbow",level:3},{value:"marionetteon(inst, line, cast)",id:"marionetteon",level:3},{value:"marionetteoff(inst, line, cast)",id:"marionetteoff",level:3},{value:"startbgmusic(inst, line, cast)",id:"startbgmusic",level:3},{value:"stopbgmusic(inst, line, cast)",id:"stopbgmusic",level:3},{value:"stageon(inst)",id:"stageon",level:3},{value:"stageoff(inst)",id:"stageoff",level:3},{value:"stinger(inst, line)",id:"stinger",level:3},{value:"findlucy(player)",id:"findlucy",level:3},{value:"lucytalk(inst, line, cast)",id:"lucytalk",level:3},{value:"maskflash(inst, line, cast)",id:"maskflash",level:3},{value:"enableblackout(inst)",id:"enableblackout",level:3},{value:"disableblackout(inst)",id:"disableblackout",level:3},{value:"waxwelldancer(inst, line, cast)",id:"waxwelldancer",level:3},{value:"crowdcomment(inst, line, cast)",id:"crowdcomment",level:3},{value:"swapmask(inst, line, cast)",id:"swapmask",level:3},{value:"findpositions(inst, line, cast)",id:"findpositions",level:3},{value:"Stage Positions",id:"stage-positions",level:2},{value:"Utility Functions",id:"utility-functions",level:2},{value:"isplayercostume(costume)",id:"isplayercostume",level:3},{value:"Related Modules",id:"related-modules",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"play-common-functions",children:"Play Common Functions"})}),"\n",(0,t.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Build Version"}),(0,t.jsx)(n.th,{children:"Change Date"}),(0,t.jsx)(n.th,{children:"Change Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"676042"}),(0,t.jsx)(n.td,{children:"2025-06-21"}),(0,t.jsx)(n.td,{children:"stable"}),(0,t.jsx)(n.td,{children:"Current version"})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"play_commonfn"})," module provides a collection of common utility functions used throughout the stage play system in Don't Starve Together. These functions handle character movement, animations, sound effects, visual effects, and stage management for theatrical performances."]}),"\n",(0,t.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local fn = require("play_commonfn")\n\n-- Call birds to the stage\nfn.callbirds(inst, line, cast)\n\n-- Position actors on stage\nfn.findpositions(inst, line, cast)\n\n-- Apply marionette effects\nfn.marionetteon(inst, line, cast)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,t.jsx)(n.h3,{id:"callbirds",children:"callbirds(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nBrings two birds (BIRD1 and BIRD2) to the stage with a slight delay between arrivals. Sets up the narrator role in the cast."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data (unused in this function)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data table to update with bird and narrator assignments"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.callbirds(inst, line, cast)\n-- BIRD1 arrives immediately\n-- BIRD2 arrives after 0.3 seconds\n-- NARRATOR role is assigned to inst\n"})}),"\n",(0,t.jsx)(n.h3,{id:"exitbirds",children:"exitbirds(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),'\nMakes birds exit the stage with staggered timing. Only affects birds that are not already in "away" state.']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data (unused in this function)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing bird references"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.exitbirds(inst, line, cast)\n-- BIRD1 exits after 0.1 seconds\n-- BIRD2 exits after 0.3 seconds\n"})}),"\n",(0,t.jsx)(n.h3,{id:"actorscurtsey",children:"actorscurtsey(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nMakes all actors perform a curtsy animation with random timing delays."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data (unused in this function)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing all actors"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.actorscurtsey(inst, line, cast)\n-- All actors perform curtsy with 0.1-0.5 second random delays\n"})}),"\n",(0,t.jsx)(n.h3,{id:"actorsbow",children:"actorsbow(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nMakes all actors perform a bow animation with random timing delays."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data (unused in this function)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing all actors"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.actorsbow(inst, line, cast)\n-- All actors perform bow with 0.1-0.5 second random delays\n"})}),"\n",(0,t.jsx)(n.h3,{id:"marionetteon",children:"marionetteon(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nApplies marionette appear effects to all non-bird, non-narrator cast members."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with optional ",(0,t.jsx)(n.code,{children:"time"})," or ",(0,t.jsx)(n.code,{children:"duration"})," field"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing all actors"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"local line = { duration = 2.0 }\nfn.marionetteon(inst, line, cast)\n-- Spawns marionette_appear_fx on eligible actors\n"})}),"\n",(0,t.jsx)(n.h3,{id:"marionetteoff",children:"marionetteoff(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nApplies marionette disappear effects to all non-bird, non-narrator cast members."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with optional ",(0,t.jsx)(n.code,{children:"time"})," or ",(0,t.jsx)(n.code,{children:"duration"})," field"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing all actors"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"local line = { duration = 1.5 }\nfn.marionetteoff(inst, line, cast)\n-- Spawns marionette_disappear_fx on eligible actors\n"})}),"\n",(0,t.jsx)(n.h3,{id:"startbgmusic",children:"startbgmusic(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nStarts background music for the stage performance."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"musictype"})," field"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data (unused in this function)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { musictype = "happy" }\nfn.startbgmusic(inst, line, cast)\n-- Sets music type to 1 (or specified musictype)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"stopbgmusic",children:"stopbgmusic(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nStops background music for the stage performance."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data (unused in this function)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data (unused in this function)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.stopbgmusic(inst, line, cast)\n-- Sets music type to 0 (off)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"stageon",children:"stageon(inst)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),'\nTransitions the stage narrator to the "on" state.']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'fn.stageon(inst)\n-- Stage goes to "narrator_on" state\n'})}),"\n",(0,t.jsx)(n.h3,{id:"stageoff",children:"stageoff(inst)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),'\nTransitions the stage narrator to the "off" state.']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'fn.stageoff(inst)\n-- Stage goes to "narrator_off" state\n'})}),"\n",(0,t.jsx)(n.h3,{id:"stinger",children:"stinger(inst, line)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nPlays a dramatic sound stinger effect."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"sound"})," field specifying the stinger sound"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { sound = "stageplay_set/statue_lyre/stinger_intro_act1" }\nfn.stinger(inst, line)\n-- Plays the specified stinger sound\n'})}),"\n",(0,t.jsx)(n.h3,{id:"findlucy",children:"findlucy(player)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nLocates Lucy (Woodie's axe) in a player's inventory."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"player"})," (Entity): The player entity to search"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"(Entity): The Lucy entity if found, nil otherwise"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"local lucy = fn.findlucy(player)\nif lucy then\n    -- Lucy found in inventory or equipped\nend\n"})}),"\n",(0,t.jsx)(n.h3,{id:"lucytalk",children:"lucytalk(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nMakes Lucy (Woodie's axe) speak a line if she is found in the specified character's inventory."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"lucytest"})," (character name) and ",(0,t.jsx)(n.code,{children:"line"})," (dialogue) fields"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing character references"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { \n    lucytest = "woodie", \n    line = "I\'m talking!" \n}\nfn.lucytalk(inst, line, cast)\n-- Lucy will speak if found in Woodie\'s inventory\n'})}),"\n",(0,t.jsx)(n.h3,{id:"maskflash",children:"maskflash(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nCreates a flashing light effect on all actors' masks over a specified duration."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"time"})," field specifying flash duration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing all actors"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"local line = { time = 3.0 }\nfn.maskflash(inst, line, cast)\n-- Masks flash for 3 seconds with sine wave intensity\n"})}),"\n",(0,t.jsx)(n.h3,{id:"enableblackout",children:"enableblackout(inst)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nEnables blackout effect for all nearby players within 25 units of the stage."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.enableblackout(inst)\n-- All nearby players get blackout effect\n"})}),"\n",(0,t.jsx)(n.h3,{id:"disableblackout",children:"disableblackout(inst)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nDisables blackout effect for all previously affected players."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"fn.disableblackout(inst)\n-- Removes blackout effect from all affected players\n"})}),"\n",(0,t.jsx)(n.h3,{id:"waxwelldancer",children:"waxwelldancer(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nSpawns a shadow dancer at a specified position relative to the stage, copying the caster's appearance."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"theta"})," (angle), ",(0,t.jsx)(n.code,{children:"radius"})," (distance), ",(0,t.jsx)(n.code,{children:"caster"})," (character name), and ",(0,t.jsx)(n.code,{children:"time"})," (duration) fields"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing caster reference"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { \n    theta = 0, \n    radius = 2, \n    caster = "waxwell", \n    time = 4.5 \n}\nfn.waxwelldancer(inst, line, cast)\n-- Spawns shadow dancer copying Maxwell\'s appearance\n'})}),"\n",(0,t.jsx)(n.h3,{id:"crowdcomment",children:"crowdcomment(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nMakes a random nearby audience member from specified prefabs perform a line and animation."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"prefabs"})," (character types), ",(0,t.jsx)(n.code,{children:"line"})," (dialogue), ",(0,t.jsx)(n.code,{children:"anim"})," (animation), and ",(0,t.jsx)(n.code,{children:"duration"})," fields"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data (used to exclude performing actors)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { \n    prefabs = {"winona"}, \n    line = "That\'s interesting!", \n    anim = "emote_cheer",\n    duration = 3.0 \n}\nfn.crowdcomment(inst, line, cast)\n-- Random Winona in audience may comment\n'})}),"\n",(0,t.jsx)(n.h3,{id:"swapmask",children:"swapmask(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nChanges the mask and/or body costume of specified actors during performance."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"roles"})," (character list), ",(0,t.jsx)(n.code,{children:"mask"})," (new mask prefab), and ",(0,t.jsx)(n.code,{children:"body"})," (new body prefab) fields"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing actor references"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { \n    roles = {"DOLL"}, \n    mask = "mask_dollbrokenhat" \n}\nfn.swapmask(inst, line, cast)\n-- Changes DOLL\'s mask to broken version\n'})}),"\n",(0,t.jsx)(n.h3,{id:"findpositions",children:"findpositions(inst, line, cast)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nMoves actors to predefined stage positions. Actors with locomotor components walk to positions, others teleport."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inst"})," (Entity): The stage entity instance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"line"})," (table): Line data with ",(0,t.jsx)(n.code,{children:"positions"})," (character to position mapping) and optional ",(0,t.jsx)(n.code,{children:"duration"})," field"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cast"})," (table): Cast data containing actor references"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local line = { \n    positions = {\n        ["DOLL"] = 1,    -- Front position\n        ["KING"] = 3     -- Right position\n    },\n    duration = 2.0 \n}\nfn.findpositions(inst, line, cast)\n-- DOLL moves to front, KING moves to right\n'})}),"\n",(0,t.jsx)(n.h2,{id:"stage-positions",children:"Stage Positions"}),"\n",(0,t.jsxs)(n.p,{children:["The following predefined positions are available for ",(0,t.jsx)(n.code,{children:"findpositions"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Position"}),(0,t.jsx)(n.th,{children:"Theta"}),(0,t.jsx)(n.th,{children:"Radius"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"-\u03c0/4"}),(0,t.jsx)(n.td,{children:"1.5"}),(0,t.jsx)(n.td,{children:"Front"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"2.0"}),(0,t.jsx)(n.td,{children:"Left"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"3"}),(0,t.jsx)(n.td,{children:"1.5\u03c0"}),(0,t.jsx)(n.td,{children:"2.2"}),(0,t.jsx)(n.td,{children:"Right"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"\u03c0/2"}),(0,t.jsx)(n.td,{children:"2.0"}),(0,t.jsx)(n.td,{children:"Back Left"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"5"}),(0,t.jsx)(n.td,{children:"\u03c0"}),(0,t.jsx)(n.td,{children:"2.0"}),(0,t.jsx)(n.td,{children:"Back Right"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"-\u03c0/4"}),(0,t.jsx)(n.td,{children:"2.3"}),(0,t.jsx)(n.td,{children:"Fore"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"7"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"Center"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"8"}),(0,t.jsx)(n.td,{children:"(3/4)\u03c0"}),(0,t.jsx)(n.td,{children:"3.0"}),(0,t.jsx)(n.td,{children:"Back"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"9"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"2.8"}),(0,t.jsx)(n.td,{children:"Left Wide"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"10"}),(0,t.jsx)(n.td,{children:"1.5\u03c0"}),(0,t.jsx)(n.td,{children:"2.8"}),(0,t.jsx)(n.td,{children:"Right Wide"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"utility-functions",children:"Utility Functions"}),"\n",(0,t.jsx)(n.h3,{id:"isplayercostume",children:"isplayercostume(costume)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status:"})," ",(0,t.jsx)(n.code,{children:"stable"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Description:"}),"\nChecks if a costume name represents a player character (not bird or narrator)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"costume"})," (string): The costume name to check"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"(boolean): True if costume is a player character, false if bird or narrator"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local isPlayer = fn.isplayercostume("KING")      -- true\nlocal isBird = fn.isplayercostume("BIRD1")       -- false\nlocal isNarrator = fn.isplayercostume("NARRATOR") -- false\n'})}),"\n",(0,t.jsx)(n.h2,{id:"related-modules",children:"Related Modules"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-generalscripts",children:"Play General Scripts"}),": Character-specific performance scripts"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-the-doll",children:"Play The Doll"}),': "The Enchanted Doll" play implementation']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/dst-api-webdocs/docs/game-scripts/core-systems/localization-content/content/play-the-veil",children:"Play The Veil"}),': "The Veil" play implementation']}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);