"use strict";(self.webpackChunkdst_api_webdocs=self.webpackChunkdst_api_webdocs||[]).push([[9534],{1403:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"api-vanilla/components/armor","title":"Armor Component","description":"Last Update: 2023-07-06","source":"@site/docs/api-vanilla/components/armor.md","sourceDirName":"api-vanilla/components","slug":"/api-vanilla/components/armor","permalink":"/dst-api-webdocs/docs/api-vanilla/components/armor","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"id":"armor","title":"Armor Component","sidebar_position":14,"last_updated":"2023-07-06T00:00:00.000Z","version":619045},"sidebar":"docs","previous":{"title":"Trader","permalink":"/dst-api-webdocs/docs/api-vanilla/components/trader"},"next":{"title":"Other Components","permalink":"/dst-api-webdocs/docs/api-vanilla/components/other-components"}}');var r=t(4848),i=t(8453);const a={id:"armor",title:"Armor Component",sidebar_position:14,last_updated:new Date("2023-07-06T00:00:00.000Z"),version:619045},s="Armor Component",d={},c=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Properties",id:"properties",level:2},{value:"Key Methods",id:"key-methods",level:2},{value:"Armor Types",id:"armor-types",level:2},{value:"Integration with Other Components",id:"integration-with-other-components",level:2},{value:"See also",id:"see-also",level:2},{value:"Example: Creating a Basic Armor Item",id:"example-creating-a-basic-armor-item",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Last Update: 2023-07-06"})}),"\n",(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"armor-component",children:"Armor Component"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"API Version: 619045"})}),"\n",(0,r.jsx)(n.p,{children:"The Armor component allows entities to provide protection against damage. It manages damage absorption, durability, and special protection effects."}),"\n",(0,r.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- Add an armor component to an entity\nlocal entity = CreateEntity()\nentity:AddComponent("armor")\n\n-- Configure the armor component\nlocal armor = entity.components.armor\narmor:SetAbsorption(0.8) -- 80% damage absorption\narmor:SetMaxCondition(100)\narmor:SetCondition(100)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"condition"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"Current durability of the armor"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"maxcondition"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"Maximum durability of the armor"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"absorb_percent"})}),(0,r.jsx)(n.td,{children:"Number"}),(0,r.jsx)(n.td,{children:"Percentage of damage absorbed (0-1)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tags"})}),(0,r.jsx)(n.td,{children:"Table"}),(0,r.jsx)(n.td,{children:"Tags for specialized protection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"weakness"})}),(0,r.jsx)(n.td,{children:"Table"}),(0,r.jsx)(n.td,{children:"Damage types this armor is weak against"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"immunetags"})}),(0,r.jsx)(n.td,{children:"Table"}),(0,r.jsx)(n.td,{children:"Damage types this armor provides immunity to"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onfinished"})}),(0,r.jsx)(n.td,{children:"Function"}),(0,r.jsx)(n.td,{children:"Called when armor breaks"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"key-methods",children:"Key Methods"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- Set damage absorption percentage\narmor:SetAbsorption(0.8) -- 80% damage absorption\n\n-- Set durability\narmor:SetMaxCondition(200)\narmor:SetCondition(200)\n\n-- Take damage\nlocal damage_taken = armor:TakeDamage(10)\n\n-- Add immunity to specific damage types\narmor:AddImmunity("fire")\n\n-- Add weakness to specific damage types\narmor:AddWeakness("electric", 1.5) -- Takes 50% more damage\n\n-- Set callback for when armor breaks\narmor:SetOnFinished(function(inst)\n    -- Do something when armor breaks\n    inst:Remove()\nend)\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Related functions"}),": When an entity with armor is damaged, the ",(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/combat",children:"Combat Component"})," calls the armor's ",(0,r.jsx)(n.code,{children:"TakeDamage()"})," function. The armor then calculates damage reduction based on its ",(0,r.jsx)(n.code,{children:"absorb_percent"})," value and any special immunities or weaknesses. The remaining damage is passed to the ",(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/health",children:"Health Component"})," via ",(0,r.jsx)(n.code,{children:"DoDelta()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"armor-types",children:"Armor Types"}),"\n",(0,r.jsx)(n.p,{children:"Armor can be specialized for different damage types:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Physical Armor"}),": Protects against standard attacks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Elemental Armor"}),": Protects against specific elements (fire, cold, electric)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Magical Armor"}),": Protects against magical/shadow damage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Specialized Armor"}),": Protects against specific enemy types"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-other-components",children:"Integration with Other Components"}),"\n",(0,r.jsx)(n.p,{children:"The Armor component often works with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Equippable"})," - For armor that can be worn"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Inventoryitem"})," - For armor that can be carried"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Combat"})," - For damage calculation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Health"})," - For protecting health"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FiniteUses"})," - For armor durability"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/combat",children:"Combat Component"})," - For damage calculation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/equippable",children:"Equippable Component"})," - For wearable armor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/health",children:"Health Component"})," - For health protection"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/weapon",children:"Weapon Component"})," - For offensive counterpart"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/dst-api-webdocs/docs/api-vanilla/components/other-components",children:"Inventoryitem Component"})," - For armor as items"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-creating-a-basic-armor-item",children:"Example: Creating a Basic Armor Item"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local function MakeArmor()\n    local inst = CreateEntity()\n    \n    -- Add basic components\n    inst.entity:AddTransform()\n    inst.entity:AddAnimState()\n    inst.entity:AddNetwork()\n    \n    -- Make it an inventory item\n    inst:AddComponent("inventoryitem")\n    \n    -- Make it equippable\n    inst:AddComponent("equippable")\n    inst.components.equippable.equipslot = EQUIPSLOTS.BODY\n    \n    -- Set up equip/unequip visuals\n    inst.components.equippable:SetOnEquip(function(inst, owner)\n        owner.AnimState:OverrideSymbol("swap_body", "armor_wood", "swap_body")\n    end)\n    \n    inst.components.equippable:SetOnUnequip(function(inst, owner)\n        owner.AnimState:ClearOverrideSymbol("swap_body")\n    end)\n    \n    -- Make it armor\n    inst:AddComponent("armor")\n    inst.components.armor:SetAbsorption(0.8) -- 80% damage absorption\n    inst.components.armor:SetMaxCondition(TUNING.ARMORWOOD)\n    \n    -- Add break effect\n    inst.components.armor:SetOnFinished(function(inst)\n        -- Play breaking sound\n        inst.SoundEmitter:PlaySound("dontstarve/wilson/use_armour_break")\n        inst:Remove()\n    end)\n    \n    return inst\nend\n\n-- Example of specialized armor\nlocal function MakeFireArmor()\n    local inst = CreateEntity()\n    \n    -- Add basic components\n    inst.entity:AddTransform()\n    inst.entity:AddAnimState()\n    inst.entity:AddNetwork()\n    \n    -- Make it an inventory item\n    inst:AddComponent("inventoryitem")\n    \n    -- Make it equippable\n    inst:AddComponent("equippable")\n    inst.components.equippable.equipslot = EQUIPSLOTS.BODY\n    \n    -- Make it armor\n    inst:AddComponent("armor")\n    inst.components.armor:SetAbsorption(0.6) -- 60% general damage absorption\n    inst.components.armor:SetMaxCondition(TUNING.ARMOR_FOOTBALLHAT)\n    \n    -- Add fire immunity\n    inst.components.armor:AddImmunity("fire")\n    \n    -- Add weakness to water\n    inst.components.armor:AddWeakness("water", 2.0) -- Takes double damage from water\n    \n    return inst\nend\n'})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var o=t(6540);const r={},i=o.createContext(r);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);