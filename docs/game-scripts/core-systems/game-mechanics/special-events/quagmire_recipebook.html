<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-game-scripts/core-systems/game-mechanics/special-events/quagmire_recipebook" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Quagmire Recipe Book | Don&#x27;t Starve Together Vanilla API</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vietnd69.github.io/dst-api-webdocs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vietnd69.github.io/dst-api-webdocs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vietnd69.github.io/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/quagmire_recipebook"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Quagmire Recipe Book | Don&#x27;t Starve Together Vanilla API"><meta data-rh="true" name="description" content="Class for managing recipe discovery, storage, and unlocking in the Quagmire seasonal event"><meta data-rh="true" property="og:description" content="Class for managing recipe discovery, storage, and unlocking in the Quagmire seasonal event"><link data-rh="true" rel="icon" href="/dst-api-webdocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vietnd69.github.io/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/quagmire_recipebook"><link data-rh="true" rel="alternate" href="https://vietnd69.github.io/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/quagmire_recipebook" hreflang="en"><link data-rh="true" rel="alternate" href="https://vietnd69.github.io/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/quagmire_recipebook" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://P9GA1YAAFR-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Don&#39;t Starve Together Vanilla API" href="/dst-api-webdocs/opensearch.xml">

<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-P6HHVZPW",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/dst-api-webdocs/assets/css/styles.d347ed0b.css">
<script src="/dst-api-webdocs/assets/js/runtime~main.490ac43d.js" defer="defer"></script>
<script src="/dst-api-webdocs/assets/js/main.761e9084.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P6HHVZPW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><link rel="preload" as="image" href="/dst-api-webdocs/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dst-api-webdocs/"><div class="navbar__logo"><img src="/dst-api-webdocs/img/logo.png" alt="Don&#x27;t Starve Together Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/dst-api-webdocs/img/logo.png" alt="Don&#x27;t Starve Together Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/dst-api-webdocs/docs/game-scripts/getting-started">Game Scripts</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/vietnd69/dst-api-webdocs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub Docs<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/vietnd69/dst-scripts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Base Game Scripts Code<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Quagmire Recipe Book</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="version-history">Version History<a href="#version-history" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h2>
<table><thead><tr><th>Build Version</th><th>Change Date</th><th>Change Type</th><th>Description</th></tr></thead><tbody><tr><td>676042</td><td>2025-06-21</td><td>stable</td><td>Current version</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>The <code>QuagmireRecipeBook</code> class manages recipe discovery, persistence, and unlocking mechanics for the Quagmire seasonal event. It tracks discovered recipes, their ingredients, cooking stations, and coin values while providing integration with the achievement system for permanent recipe unlocking.</p>
<p>The system automatically discovers new recipes as players cook, stores multiple ingredient combinations per dish, and manages temporary session-based unlocks alongside permanent achievement-based unlocks.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="constants">Constants<a href="#constants" class="hash-link" aria-label="Direct link to Constants" title="Direct link to Constants">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use_settings_file">USE_SETTINGS_FILE<a href="#use_settings_file" class="hash-link" aria-label="Direct link to USE_SETTINGS_FILE" title="Direct link to USE_SETTINGS_FILE">​</a></h3>
<p><strong>Value:</strong> <code>PLATFORM ~= &quot;PS4&quot; and PLATFORM ~= &quot;NACL&quot;</code></p>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong> Platform check for persistent storage availability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="max_recipes">MAX_RECIPES<a href="#max_recipes" class="hash-link" aria-label="Direct link to MAX_RECIPES" title="Direct link to MAX_RECIPES">​</a></h3>
<p><strong>Value:</strong> <code>3</code></p>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong> Maximum number of ingredient combinations stored per recipe.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="class-definition">Class Definition<a href="#class-definition" class="hash-link" aria-label="Direct link to Class Definition" title="Direct link to Class Definition">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="constructor">QuagmireRecipeBook()<a href="#constructor" class="hash-link" aria-label="Direct link to QuagmireRecipeBook()" title="Direct link to QuagmireRecipeBook()">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Creates a new QuagmireRecipeBook instance with empty recipe storage.</p>
<p><strong>Properties:</strong></p>
<ul>
<li><code>recipes</code> (table): Storage for discovered recipe data</li>
<li><code>dirty</code> (boolean): Flag indicating unsaved changes</li>
<li><code>filters</code> (table): Recipe filtering options</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="instance-methods">Instance Methods<a href="#instance-methods" class="hash-link" aria-label="Direct link to Instance Methods" title="Direct link to Instance Methods">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="is-recipe-unlocked">IsRecipeUnlocked(product)<a href="#is-recipe-unlocked" class="hash-link" aria-label="Direct link to IsRecipeUnlocked(product)" title="Direct link to IsRecipeUnlocked(product)">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Checks if a recipe is permanently unlocked through achievement system.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>product</code> (string): Recipe product name (e.g., &quot;quagmire_bisque&quot;)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>(boolean): True if recipe is permanently unlocked via achievements</li>
</ul>
<p><strong>Implementation Logic:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> split_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;_&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> achievement_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_&quot;</span><span class="token operator" style="color:#393A34">..</span><span class="token plain">split_name</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">#</span><span class="token plain">split_name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> EventAchievements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">IsAchievementUnlocked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FESTIVAL_EVENTS</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">QUAGMIRE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetFestivalEventSeasons</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FESTIVAL_EVENTS</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">QUAGMIRE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> achievement_name</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Example:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> is_unlocked </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">IsRecipeUnlocked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;quagmire_bisque&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Checks achievement: &quot;food_bisque&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-valid-recipes">GetValidRecipes()<a href="#get-valid-recipes" class="hash-link" aria-label="Direct link to GetValidRecipes()" title="Direct link to GetValidRecipes()">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Returns all recipes that are either permanently unlocked or temporarily available in current session.</p>
<p><strong>Returns:</strong></p>
<ul>
<li>(table): Dictionary of valid recipes keyed by product name</li>
</ul>
<p><strong>Logic:</strong></p>
<ul>
<li>Permanently unlocked recipes (via achievements) are always included</li>
<li>Temporarily unlocked recipes (discovered this session) are included</li>
<li>Session identification prevents cross-session temporary access</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> valid_recipes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">GetValidRecipes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Returns: {[&quot;quagmire_bisque&quot;] = {recipe_data}, ...}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load">Load()<a href="#load" class="hash-link" aria-label="Direct link to Load()" title="Direct link to Load()">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Loads recipe data from persistent storage and initializes the recipe book.</p>
<p><strong>Process:</strong></p>
<ol>
<li>Retrieves persistent string data using key &quot;recipebook&quot;</li>
<li>Decodes JSON data into recipe structure</li>
<li>Removes duplicate recipe combinations</li>
<li>Sets dirty flag to false</li>
</ol>
<p><strong>Error Handling:</strong></p>
<ul>
<li>Prints &quot;Failed to load the Gorge recipe book&quot; on JSON decode failure</li>
<li>Gracefully handles missing or corrupted data</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Asynchronously loads data from persistent storage</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="save">Save()<a href="#save" class="hash-link" aria-label="Direct link to Save()" title="Direct link to Save()">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Saves recipe data to persistent storage if changes have been made.</p>
<p><strong>Process:</strong></p>
<ol>
<li>Checks dirty flag to avoid unnecessary saves</li>
<li>Triggers UI refresh event &quot;quagmire_refreshrecipbookwidget&quot;</li>
<li>Encodes recipe data as JSON</li>
<li>Saves to persistent storage with key &quot;recipebook&quot;</li>
</ol>
<p><strong>Example:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Make changes to recipes...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Only saves if dirty flag is true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-world">RegisterWorld(world)<a href="#register-world" class="hash-link" aria-label="Direct link to RegisterWorld(world)" title="Direct link to RegisterWorld(world)">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Registers the recipe book with world event listeners for automatic recipe discovery and appraisal.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>world</code> (EntityScript): World entity to listen for events</li>
</ul>
<p><strong>Events Registered:</strong></p>
<ul>
<li><code>&quot;quagmire_recipediscovered&quot;</code>: Triggered when new recipes are cooked</li>
<li><code>&quot;quagmire_recipeappraised&quot;</code>: Triggered when recipes are evaluated for coins</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">RegisterWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TheWorld</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recipe-data-structure">Recipe Data Structure<a href="#recipe-data-structure" class="hash-link" aria-label="Direct link to Recipe Data Structure" title="Direct link to Recipe Data Structure">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recipe-entry-format">Recipe Entry Format<a href="#recipe-entry-format" class="hash-link" aria-label="Direct link to Recipe Entry Format" title="Direct link to Recipe Entry Format">​</a></h3>
<p>Each recipe entry contains the following structure:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dish </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">true</span><span class="token operator" style="color:#393A34">/</span><span class="token keyword" style="color:#00009f">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">-- Whether it&#x27;s a dish (vs syrup)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    station </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;cookpot&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;...&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">-- Array of compatible cooking stations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;small/large/syrup&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Recipe size category</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;new&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">-- New recipe marker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    date </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DD/MM/YYYY/HH:MM:SS&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Discovery timestamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    recipes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">-- Array of ingredient combinations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;ingredient1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ingredient2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;variant1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;variant2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    session </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;session_id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Session identifier for temporary unlock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    base_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">-- Coin values for base dish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    silver_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">-- Coin values for silver-quality dish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        coin4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;craving_tag&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snack&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Recipe tags for cravings and penalties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="internal-functions">Internal Functions<a href="#internal-functions" class="hash-link" aria-label="Direct link to Internal Functions" title="Direct link to Internal Functions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove-cooked-from-name">RemoveCookedFromName(ingredients)<a href="#remove-cooked-from-name" class="hash-link" aria-label="Direct link to RemoveCookedFromName(ingredients)" title="Direct link to RemoveCookedFromName(ingredients)">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Normalizes ingredient names by removing cooking state indicators.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>ingredients</code> (table): Array of ingredient names</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>(table): Array of normalized ingredient names</li>
</ul>
<p><strong>Transformations:</strong></p>
<ul>
<li><code>&quot;_cooked_&quot;</code> → <code>&quot;&quot;</code></li>
<li><code>&quot;cooked_&quot;</code> → <code>&quot;&quot;</code></li>
<li><code>&quot;quagmire_cooked&quot;</code> → <code>&quot;quagmire_&quot;</code></li>
<li><code>&quot;_cooked&quot;</code> → <code>&quot;&quot;</code></li>
<li><code>&quot;cooked&quot;</code> → <code>&quot;&quot;</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="is-known-ingredients">IsKnownIngredients(recipes, ingredients)<a href="#is-known-ingredients" class="hash-link" aria-label="Direct link to IsKnownIngredients(recipes, ingredients)" title="Direct link to IsKnownIngredients(recipes, ingredients)">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Checks if an ingredient combination is already known for a recipe.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>recipes</code> (table): Array of known ingredient combinations</li>
<li><code>ingredients</code> (table): Ingredient combination to check</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>(number|nil): Index of matching recipe, or nil if not found</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="on-recipe-discovered">OnRecipeDiscovered(self, data)<a href="#on-recipe-discovered" class="hash-link" aria-label="Direct link to OnRecipeDiscovered(self, data)" title="Direct link to OnRecipeDiscovered(self, data)">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Event handler for new recipe discovery. Updates recipe database and triggers notifications.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>self</code> (QuagmireRecipeBook): Recipe book instance</li>
<li><code>data</code> (table): Recipe discovery data</li>
</ul>
<p><strong>Process:</strong></p>
<ol>
<li>Validates recipe (excludes burnt/goop products)</li>
<li>Normalizes and sorts ingredients</li>
<li>Determines station size based on ingredient count</li>
<li>Updates or creates recipe entry</li>
<li>Manages ingredient combination storage (MAX_RECIPES limit)</li>
<li>Triggers UI notification event</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="on-recipe-appraised">OnRecipeAppraised(self, data)<a href="#on-recipe-appraised" class="hash-link" aria-label="Direct link to OnRecipeAppraised(self, data)" title="Direct link to OnRecipeAppraised(self, data)">​</a></h3>
<p><strong>Status:</strong> <code>stable</code></p>
<p><strong>Description:</strong>
Event handler for recipe coin evaluation. Updates coin values and recipe tags.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>self</code> (QuagmireRecipeBook): Recipe book instance</li>
<li><code>data</code> (table): Recipe appraisal data including coins and quality</li>
</ul>
<p><strong>Process:</strong></p>
<ol>
<li>Constructs coin value structure</li>
<li>Determines value type (base_value vs silver_value)</li>
<li>Updates recipe with better coin values</li>
<li>Adds craving and penalty tags</li>
<li>Saves changes automatically</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-examples">Usage Examples<a href="#usage-examples" class="hash-link" aria-label="Direct link to Usage Examples" title="Direct link to Usage Examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-recipe-book-setup">Basic Recipe Book Setup<a href="#basic-recipe-book-setup" class="hash-link" aria-label="Direct link to Basic Recipe Book Setup" title="Direct link to Basic Recipe Book Setup">​</a></h3>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> QuagmireRecipeBook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;quagmire_recipebook&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Create and initialize recipe book</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> recipe_book </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QuagmireRecipeBook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">RegisterWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TheWorld</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Check if player can access a specific recipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> can_cook_bisque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">IsRecipeUnlocked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;quagmire_bisque&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> can_cook_bisque </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Bisque recipe permanently unlocked!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Get all currently accessible recipes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> available_recipes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> recipe_book</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">GetValidRecipes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> product_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> recipe_data </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pairs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">available_recipes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Can cook:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Stations:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">recipe_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">station</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;, &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recipe-discovery-simulation">Recipe Discovery Simulation<a href="#recipe-discovery-simulation" class="hash-link" aria-label="Direct link to Recipe Discovery Simulation" title="Direct link to Recipe Discovery Simulation">​</a></h3>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Simulate discovering a new recipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> discovery_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;quagmire_bisque&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingredients </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;quagmire_crabmeat&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;potato&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;onion&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    station </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cookpot&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dish </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- This would normally be triggered by game events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TheWorld</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">PushEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;quagmire_recipediscovered&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> discovery_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Simulate recipe appraisal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> appraisal_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;quagmire_bisque&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    coins </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    silverdish </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchedcraving </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hearty&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    snackpenalty </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TheWorld</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">PushEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;quagmire_recipeappraised&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appraisal_data</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-points">Integration Points<a href="#integration-points" class="hash-link" aria-label="Direct link to Integration Points" title="Direct link to Integration Points">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="achievement-system-integration">Achievement System Integration<a href="#achievement-system-integration" class="hash-link" aria-label="Direct link to Achievement System Integration" title="Direct link to Achievement System Integration">​</a></h3>
<p>The recipe book integrates with the achievement system through:</p>
<ul>
<li><strong>Permanent Unlocks</strong>: Recipes unlocked via <code>&quot;food_[name]&quot;</code> achievements</li>
<li><strong>Cross-Session Persistence</strong>: Achievement-based unlocks persist across games</li>
<li><strong>Temporary Access</strong>: Session-based discovery for preview before permanent unlock</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-system-integration">Event System Integration<a href="#event-system-integration" class="hash-link" aria-label="Direct link to Event System Integration" title="Direct link to Event System Integration">​</a></h3>
<p>Key events for recipe book functionality:</p>
<ul>
<li><strong>Discovery</strong>: <code>&quot;quagmire_recipediscovered&quot;</code> from cooking system</li>
<li><strong>Appraisal</strong>: <code>&quot;quagmire_recipeappraised&quot;</code> from tribute evaluation</li>
<li><strong>UI Refresh</strong>: <code>&quot;quagmire_refreshrecipbookwidget&quot;</code> for interface updates</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-system-integration">Persistence System Integration<a href="#persistence-system-integration" class="hash-link" aria-label="Direct link to Persistence System Integration" title="Direct link to Persistence System Integration">​</a></h3>
<p>Data persistence through:</p>
<ul>
<li><strong>Storage Key</strong>: <code>&quot;recipebook&quot;</code> in persistent storage</li>
<li><strong>Format</strong>: JSON-encoded recipe data structure</li>
<li><strong>Platform Support</strong>: Conditional based on platform capabilities</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-modules">Related Modules<a href="#related-modules" class="hash-link" aria-label="Direct link to Related Modules" title="Direct link to Related Modules">​</a></h2>
<ul>
<li><a href="/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/quagmire_achievements.md">Quagmire Achievements</a>: Recipe unlock achievements</li>
<li><a href="/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/eventachievements.md">Event Achievements</a>: Core achievement system</li>
<li><a href="/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/cooking.md">Cooking</a>: Recipe cooking mechanics</li>
<li><a href="/dst-api-webdocs/docs/game-scripts/core-systems/game-mechanics/special-events/json.md">JSON</a>: Data serialization for persistence</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#version-history" class="table-of-contents__link toc-highlight">Version History</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#constants" class="table-of-contents__link toc-highlight">Constants</a><ul><li><a href="#use_settings_file" class="table-of-contents__link toc-highlight">USE_SETTINGS_FILE</a></li><li><a href="#max_recipes" class="table-of-contents__link toc-highlight">MAX_RECIPES</a></li></ul></li><li><a href="#class-definition" class="table-of-contents__link toc-highlight">Class Definition</a><ul><li><a href="#constructor" class="table-of-contents__link toc-highlight">QuagmireRecipeBook()</a></li></ul></li><li><a href="#instance-methods" class="table-of-contents__link toc-highlight">Instance Methods</a><ul><li><a href="#is-recipe-unlocked" class="table-of-contents__link toc-highlight">IsRecipeUnlocked(product)</a></li><li><a href="#get-valid-recipes" class="table-of-contents__link toc-highlight">GetValidRecipes()</a></li><li><a href="#load" class="table-of-contents__link toc-highlight">Load()</a></li><li><a href="#save" class="table-of-contents__link toc-highlight">Save()</a></li><li><a href="#register-world" class="table-of-contents__link toc-highlight">RegisterWorld(world)</a></li></ul></li><li><a href="#recipe-data-structure" class="table-of-contents__link toc-highlight">Recipe Data Structure</a><ul><li><a href="#recipe-entry-format" class="table-of-contents__link toc-highlight">Recipe Entry Format</a></li></ul></li><li><a href="#internal-functions" class="table-of-contents__link toc-highlight">Internal Functions</a><ul><li><a href="#remove-cooked-from-name" class="table-of-contents__link toc-highlight">RemoveCookedFromName(ingredients)</a></li><li><a href="#is-known-ingredients" class="table-of-contents__link toc-highlight">IsKnownIngredients(recipes, ingredients)</a></li><li><a href="#on-recipe-discovered" class="table-of-contents__link toc-highlight">OnRecipeDiscovered(self, data)</a></li><li><a href="#on-recipe-appraised" class="table-of-contents__link toc-highlight">OnRecipeAppraised(self, data)</a></li></ul></li><li><a href="#usage-examples" class="table-of-contents__link toc-highlight">Usage Examples</a><ul><li><a href="#basic-recipe-book-setup" class="table-of-contents__link toc-highlight">Basic Recipe Book Setup</a></li><li><a href="#recipe-discovery-simulation" class="table-of-contents__link toc-highlight">Recipe Discovery Simulation</a></li></ul></li><li><a href="#integration-points" class="table-of-contents__link toc-highlight">Integration Points</a><ul><li><a href="#achievement-system-integration" class="table-of-contents__link toc-highlight">Achievement System Integration</a></li><li><a href="#event-system-integration" class="table-of-contents__link toc-highlight">Event System Integration</a></li><li><a href="#persistence-system-integration" class="table-of-contents__link toc-highlight">Persistence System Integration</a></li></ul></li><li><a href="#related-modules" class="table-of-contents__link toc-highlight">Related Modules</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/dst-api-webdocs/docs/game-scripts/getting-started/about-game-scripts">DST Vanilla</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forums.kleientertainment.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Klei Forums<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.gg/dst" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/vietnd69/dst-api-webdocs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contribute<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Don't Starve Together Vanilla API v0.5.2 Docs.</div></div></div></footer></div>
</body>
</html>